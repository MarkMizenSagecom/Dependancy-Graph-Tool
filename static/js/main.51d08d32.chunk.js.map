{"version":3,"sources":["redux/user/userSlice.js","components/Guard.js","redux/dependancies/dependanciesSlice.js","components/FirebaseSync.js","features/Tree/TreeContext.js","hooks/useViewport.js","features/Tree/DraggableGroup.js","redux/options/optionsSlice.js","features/Tree/TreeNode.js","features/Tree/TreeArrows.js","features/Tree/TreeContents.js","features/Tree/TreeView.js","context/clickAndDrag.js","context/refs.js","redux/connections/connectionsSlice.js","features/Columns/Connections.js","redux/linking/linkingSlice.js","data/statuses.js","features/Columns/NodeEditor.js","features/Comments/SingleComment.js","features/Comments/CommentHistory.js","features/Comments/NewComment.js","features/Comments/Comments.js","features/Columns/ColumnItem.js","features/Columns/Column.js","features/Columns/ColumnsView.js","components/UserDetails.js","components/SearchResults.js","components/ComponentSearch.js","components/SaveButton.js","components/AppSidebar.js","App.js","redux/store.js","serviceWorker.js","firebaseConfig.js","index.js"],"names":["WRITE_ACCESS","userSlice","createSlice","name","initialState","noSignIn","userDetails","uid","email","photoURL","displayName","signedIn","writeAccess","commentAccess","reducers","logOut","setNoSignIn","state","action","payload","setUser","includes","actions","getUserDetails","user","getSignedIn","getWriteAccess","getReadOnly","getCommentAccess","getNoSignIn","GuardWrap","styled","div","Guard","children","isSignedIn","useSelector","dispatch","useDispatch","console","log","uiConfig","signInFlow","signInOptions","firebase","auth","GoogleAuthProvider","PROVIDER_ID","callbacks","signInSuccessWithAuthResult","type","align","mb","variant","firebaseAuth","onClick","genId","prefix","Math","random","toString","substr","dependanciesSlice","saving","shouldLoad","items","connections","columns","addItem","column","id","partial","title","description","status","genItem","unshift","removeItem","Object","keys","find","col","findIndex","item","filter","thisItem","from","to","updateItem","update","moveItem","newPos","startPos","splice","addColumn","removeColumn","updateColumn","addConnection","existing","conn","push","removeConnection","updateAll","save","saved","getItems","dependancies","getColumns","getConnections","getShouldLoad","getShouldSave","getSaving","FirebaseSync","shouldSave","firestore","useFirestore","useEffect","Promise","all","collection","get","then","itemsData","columnsData","connectionsData","itemsValues","docs","forEach","doc","data","columnsValues","connectionsValues","map","batch","ref","delete","indexOf","set","connection","index","String","commit","catch","err","finally","warn","TreeContext","createContext","TreeContextProvider","itemId","useParams","nodesToShow","rel","colKeys","rowLength","columnsLength","colKey","rowCount","nodeToShowIndex","node","row","max","nodes","descendants","length","ancesstors","position","x","FRAME_WIDTH","y","active","Provider","value","maxColumns","useViewport","useState","width","window","innerWidth","height","innerHeight","viewport","setViewport","handleWindowResize","addEventListener","removeEventListener","reducer","start","mouseDown","prev","transform","DraggableGroup","useReducer","dragging","useContext","outerTransform","useMemo","eventHandler","document","fill","onMouseDown","ev","clientX","clientY","onMouseMove","onMouseUp","style","userSelect","optionsSlice","showOtherRelations","showAllArrows","setOption","key","getShowOtherRelations","options","NodeTitle","text","NodeDescription","NodeColumn","NodeBox","rect","props","root","OtherNodeLabel","parentX","parentY","line","d","strokeWidth","stroke","cx","cy","r","textAnchor","dominantBaseline","TreeNode","selected","itemDetails","descendantsLabel","ancesstorsLabel","TreeArrowsG","g","TreeArrows","activePosition","xStart","yStart","xEnd","yEnd","triangle","points","TreeContents","history","useHistory","switchItem","useCallback","TreeViewWrap","TreeViewSVG","svg","TreeView","viewbox","svgProps","setSvgProps","preserveAspectRatio","xmlns","ClickAndDrag","ClickAndDragProvider","setState","drag","drop","linking","Refs","newState","RefsProvider","addRef","removeRef","refs","connectionsSlice","scrollLeft","updateScrollLeft","getScrollLeft","ConnectionsWrap","Svg","Connections","refsContext","viewBox","useRef","lines","scrollTop","documentElement","fromRef","toRef","fromClientRect","getBoundingClientRect","right","top","toClientRect","abs","left","current","linkingSlice","source","startLinking","doneLinking","getLinkingSource","getIsLinking","statuses","unknown","color","stable","underReview","unstable","outdated","deprecated","ItemButtons","Circle","span","NodeEditor","doneEditing","confirmDelete","setConfirmDelete","val","onSubmit","preventDefault","labelInline","label","size","onChange","target","required","buttonType","open","onConfirm","requestAnimationFrame","onCancel","ButtonWrap","CommentMeta","CommentContent","CommentAuthor","CommentWrap","SingleComment","comment","deleteComment","dateFormatted","datetime","seconds","Date","toLocaleString","weekday","year","month","fromSelf","author","className","tabIndex","content","destructive","CommentHistoryBox","NoComments","CommentHistory","comments","Actions","Form","form","NewComment","message","setMessage","trim","rows","ml","Comments","close","itemRef","messagesRef","threadMessages","useFirestoreCollectionData","idField","addComment","now","messageCount","add","floor","milliseconds","CommentBtnWrap","ColumnItemEle","ReadOnlyView","ColumnItem","edittable","setEdittable","showComments","setShowComments","linkingSource","readonly","startEditing","querySelector","focus","viewTree","addLink","startLinkingFromNode","exitlinking","orientation","pixelWidth","cursor","fontSize","borderColor","disabled","onAction","ColumnEle","ColumnVerticalList","justify","ColumnTitle","ColumnTitleText","h2","ColumnTitleEditable","input","EditableWrap","EditableIcon","Column","colId","titleInput","bgTheme","bgSize","ColumnsViewWrap","ColumnsScrollableWrap","Provders","ColumnsView","scrollable","handleScroll","onScroll","UserDetailsWrap","UserDetails","mt","fullWidth","src","signOut","ItemActions","ItemList","ul","Item","li","SearchResults","searchTerm","searchSelector","toLowerCase","results","as","listStyleType","pl","fontWeight","SearchWrap","SearchLabel","ComponentSearch","setSearchTerm","placeholder","e","searchButton","SaveButton","handleClick","isInsideButton","SidebarWrap","SidebarActions","Hr","hr","AppSidebar","path","goBack","exact","iconType","AppWrap","Wrap","App","component","configureStore","linkingReducer","dependanciesReducer","connectionsReducer","optionsReducer","userReducer","Boolean","location","hostname","match","firebaseConfig","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","ReactDOM","render","StrictMode","store","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.51d08d32.chunk.js","sourcesContent":["import { createSlice } from \"@reduxjs/toolkit\";\n\nconst WRITE_ACCESS = [\"hFgfQcppuQXWOjHC72Cs7XK0uQ52\"];\n\nexport const userSlice = createSlice({\n  name: \"user\",\n  initialState: {\n    noSignIn: true,\n    userDetails: {\n      uid: null,\n      email: null,\n      photoURL: null,\n      displayName: null,\n    },\n    signedIn: false,\n    writeAccess: false,\n    commentAccess: false,\n  },\n  reducers: {\n    logOut: () => {\n      return {\n        noSignIn: false,\n        userDetails: {\n          uid: null,\n          email: null,\n          photoURL: null,\n          displayName: null,\n        },\n        signedIn: false,\n        writeAccess: false,\n        commentAccess: false,\n      };\n    },\n    setNoSignIn: (state, action) => {\n      return { ...state, noSignIn: action.payload };\n    },\n    setUser: (state, action) => {\n      if (action.payload) {\n        state.userDetails = {\n          uid: action.payload.uid,\n          email: action.payload.email,\n          photoURL: action.payload.photoURL,\n          displayName: action.payload.displayName,\n        };\n        state.noSignIn = false;\n        state.signedIn = true;\n        state.writeAccess = WRITE_ACCESS.includes(action.payload.uid);\n        state.commentAccess = state.writeAccess\n          ? true\n          : action.payload.email.includes(\"@sage.com\");\n      } else {\n        state.noSignIn = false;\n        state.userDetails = {\n          uid: null,\n          email: null,\n          photoURL: null,\n        };\n        state.signedIn = false;\n        state.writeAccess = false;\n      }\n    },\n  },\n});\n\nexport const { setUser, logOut, setNoSignIn } = userSlice.actions;\n\nexport const getUserDetails = (state) => state?.user?.userDetails;\nexport const getSignedIn = (state) => state?.user?.signedIn;\nexport const getWriteAccess = (state) => state?.user?.writeAccess;\nexport const getReadOnly = (state) => !state?.user?.writeAccess;\nexport const getCommentAccess = (state) => state?.user?.commentAccess;\nexport const getNoSignIn = (state) => state?.user?.noSignIn;\n\nexport default userSlice.reducer;\n","import React from \"react\";\nimport firebase from \"firebase\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport FirebaseAuth from \"react-firebaseui/FirebaseAuth\";\n\nimport Typography from \"carbon-react/lib/components/typography\";\n\nimport { getNoSignIn, setNoSignIn, setUser } from \"../redux/user/userSlice\";\nimport { getSignedIn } from \"../redux/user/userSlice\";\nimport styled from \"styled-components\";\nimport Tile from \"carbon-react/lib/components/tile\";\nimport Content from \"carbon-react/lib/components/content\";\nimport Button from \"carbon-react/lib/components/button\";\n\nconst GuardWrap = styled.div`\n  display: flex;\n  flex-direction: column;\n  margin: 2rem auto;\n  width: 600px;\n  max-width: 100%;\n  font-size: 16px;\n`;\n\nfunction Guard({ children }) {\n  const isSignedIn = useSelector(getSignedIn);\n  const noSignIn = useSelector(getNoSignIn);\n  const dispatch = useDispatch();\n\n  console.log({noSignIn});\n\n  if (noSignIn || isSignedIn) {\n    return <>{children}</>;\n  }\n\n  const uiConfig = {\n    // Popup signin flow rather than redirect flow.\n    signInFlow: \"popup\",\n    // We will display Google and Facebook as auth providers.\n    signInOptions: [firebase.auth.GoogleAuthProvider.PROVIDER_ID],\n    callbacks: {\n      signInSuccessWithAuthResult({ user }) {\n        const userDetails = {\n          uid: user.uid,\n          email: user.email,\n          photoURL: user.photoURL,\n          displayName: user.displayName,\n        };\n        dispatch({ type: setUser.type, payload: userDetails });\n        return false;\n      },\n    },\n  };\n\n  return (\n    <GuardWrap>\n      <Tile>\n        <Content align=\"center\">\n          <Typography mb={4} variant=\"h1-large\">\n            Dependancy Graph\n          </Typography>\n          <p>Please sign in using SSO</p>\n          <FirebaseAuth uiConfig={uiConfig} firebaseAuth={firebase.auth()} />\n\n          <p>Or</p>\n          <Button\n            variant=\"secondary\"\n            onClick={() => {\n              dispatch({ type: setNoSignIn, payload: true });\n            }}\n          >\n            Continue without signing in\n          </Button>\n        </Content>\n      </Tile>\n    </GuardWrap>\n  );\n}\n\nexport default Guard;\n","import { createSlice } from \"@reduxjs/toolkit\";\n\nconst genId = (prefix = \"item\") =>\n  `${prefix}-${Math.random()\n    .toString()\n    .substr(2, 8)}${Math.random().toString().substr(2, 8)}`;\n\nconst genItem = (partial = {}) => ({\n  title: \"Name\",\n  description: \"\",\n  status: \"unknown\",\n  ...partial,\n});\n\nexport const dependanciesSlice = createSlice({\n  name: \"dependancies\",\n  initialState: {\n    saving: false,\n    shouldLoad: true,\n    items: {},\n    connections: [],\n    columns: {},\n  },\n  reducers: {\n    addItem: (state, action) => {\n      const { column } = action.payload;\n      let id = genId();\n      // Make sure there are no id conflicts. \n      // Should be very low, but non-zero, chance\n      while (!!state.items[id]) {\n        id = genId();\n      }\n      state.items[id] = genItem();\n      state.columns[column].items.unshift(id);\n\n      return state;\n    },\n    removeItem: (state, action) => {\n      const { id } = action.payload;\n\n      // Delete the item\n      delete state.items[id];\n\n      // Get the correct column to remove it from\n      const column = Object.keys(state.columns).find((col) => {\n        return state.columns[col]?.items?.findIndex((item) => item === id) > -1;\n      });\n\n      if (column) {\n        // Filter it from the column\n        state.columns[column].items = state.columns[column].items.filter(\n          (thisItem) => thisItem !== id\n        );\n      }\n\n      state.connections = state.connections.filter(\n        ({ from, to }) => from !== id && to !== id\n      );\n\n      return state;\n    },\n    updateItem: (state, action) => {\n      const { id, update } = action.payload;\n      state.items[id] = {\n        ...state.items[id],\n        ...update,\n      };\n    },\n    moveItem: (state, action) => {\n      const { id, newPos, from, to } = action.payload;\n      const startPos = state.columns[from].items.findIndex(id);\n\n      // If from and to are the same then this will still work, so no case needs to be added\n\n      // Remove from original array:\n      state.columns[from].items.splice(startPos, 1);\n\n      // Add to target array\n      state.columns[to].items.splice(newPos, 0, id);\n\n      return state;\n    },\n    addColumn: (state) => {\n      const id = genId(\"column-\");\n\n      state.columns[id] = {\n        title: \"Column title\",\n        items: [],\n      };\n    },\n    removeColumn: (state, action) => {\n      const { id } = action.payload;\n      delete state.columns[id];\n    },\n    updateColumn: (state, action) => {\n      const { id, ...update } = action.payload;\n\n      return {\n        ...state,\n        columns: {\n          ...state.columns,\n          [id]: {\n            ...state.columns[id],\n            ...update,\n          },\n        },\n      };\n    },\n    addConnection: (state, action) => {\n      const { to, from } = action.payload;\n      const existing = state.connections.findIndex(\n        (conn) => conn.to === to && conn.from === from\n      );\n      if (existing > -1) {\n        state.connections.splice(existing, 1);\n      } else {\n        state.connections.push({ to, from });\n      }\n    },\n    removeConnection: (state, action) => {\n      const { to, from } = action.payload;\n      state.connections = state.connections.filter(\n        (item) => item.to === to && item.from === from\n      );\n    },\n    updateAll: (state, action) => {\n      const { items, columns, connections } = action.payload;\n\n      state.items = items;\n      state.columns = columns;\n      state.connections = connections;\n      state.shouldLoad = false;\n    },\n    save: (state) => {\n      state.saving = true;\n    },\n    saved: (state) => {\n      state.saving = false;\n    },\n  },\n});\n\nexport const {\n  addItem,\n  removeItem,\n  updateItem,\n  moveItem,\n  addColumn,\n  updateColumn,\n  addConnection,\n  updateAll,\n  save,\n  saved,\n} = dependanciesSlice.actions;\n\nexport const getItems = (state) => state?.dependancies?.items;\nexport const getColumns = (state) => state?.dependancies?.columns;\nexport const getConnections = (state) => state?.dependancies?.connections;\nexport const getShouldLoad = (state) => state?.dependancies?.shouldLoad;\nexport const getShouldSave = (state) => state?.dependancies?.saving;\nexport const getSaving = (state) => state?.dependancies?.saving;\n\nexport default dependanciesSlice.reducer;\n","import { useEffect } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport {\n  getConnections,\n  getColumns,\n  getItems,\n  getShouldLoad,\n  getShouldSave,\n  updateAll,\n  saved,\n} from \"../redux/dependancies/dependanciesSlice\";\nimport { getWriteAccess } from \"../redux/user/userSlice\";\nimport { useFirestore } from \"reactfire\";\n\nfunction FirebaseSync() {\n  const shouldLoad = useSelector(getShouldLoad);\n  const writeAccess = useSelector(getWriteAccess);\n  const shouldSave = useSelector(getShouldSave);\n\n  const items = useSelector(getItems);\n  const connections = useSelector(getConnections);\n  const columns = useSelector(getColumns);\n\n  const dispatch = useDispatch();\n\n  const firestore = useFirestore();\n\n  useEffect(() => {\n    if (!shouldLoad) {\n      return;\n    }\n\n    Promise.all([\n      firestore.collection(\"items\").get(),\n      firestore.collection(\"columns\").get(),\n      firestore.collection(\"connections\").get(),\n    ]).then(([itemsData, columnsData, connectionsData]) => {\n      const itemsValues = {};\n      itemsData.docs.forEach((doc) => {\n        itemsValues[doc.id] = doc.data();\n      });\n\n      const columnsValues = {};\n      columnsData.docs.forEach((doc) => {\n        columnsValues[doc.id] = doc.data();\n      });\n\n      const connectionsValues = connectionsData.docs.map((doc) => {\n        const data = doc.data();\n        const { to, from } = data;\n        return { to, from };\n      });\n\n      dispatch({\n        type: updateAll.type,\n        payload: {\n          items: itemsValues,\n          columns: columnsValues,\n          connections: connectionsValues,\n        },\n      });\n    });\n  }, [shouldLoad, firestore, dispatch]);\n\n  useEffect(() => {\n    if (!shouldSave) {\n      return;\n    }\n    if (!writeAccess) {\n      console.warn(\"User doesn't have write access\");\n      dispatch({ type: saved.type });\n      return;\n    }\n\n    Promise.all([\n      firestore.collection(\"items\").get(),\n      firestore.collection(\"columns\").get(),\n      firestore.collection(\"connections\").get(),\n    ])\n      .then(([itemsData, columnsData, connectionsData]) => {\n        const batch = firestore.batch();\n\n        // Remove deleted items\n        itemsData.docs.forEach((doc) => {\n          if (!items[doc.id]) {\n            const ref = firestore.collection(\"items\").doc(doc.id);\n            batch.delete(ref);\n          }\n        });\n\n        // Remove deleted columns\n        columnsData.docs.forEach((doc) => {\n          if (!columns[doc.id]) {\n            const ref = firestore.collection(\"columns\").doc(doc.id);\n            batch.delete(ref);\n          }\n        });\n\n        // Reset all connections\n        connectionsData.docs.forEach((doc) => {\n          const ref = firestore.collection(\"connections\").doc(doc.id);\n          batch.delete(ref);\n        });\n\n        Object.keys(items).forEach((id) => {\n          const ref = firestore.collection(\"items\").doc(id);\n          if (itemsData.docs.indexOf((doc) => doc.id === id) === -1) {\n            batch.set(ref, items[id]);\n          } else {\n            batch.update(ref, items[id]);\n          }\n        });\n\n        Object.keys(columns).forEach((id) => {\n          const ref = firestore.collection(\"columns\").doc(id);\n          if (columnsData.docs.indexOf((doc) => doc.id === id) === -1) {\n            batch.set(ref, columns[id]);\n          } else {\n            batch.update(ref, columns[id]);\n          }\n        });\n\n        connections.forEach((connection, index) => {\n          const ref = firestore.collection(\"connections\").doc(String(index));\n          batch.set(ref, connection);\n        });\n\n        return batch.commit();\n      })\n      .then(() => {\n        console.log(\"batch executed\");\n      })\n      .catch((err) => {\n        console.log(\"batch failed\", err);\n      })\n      .finally(() => {\n        dispatch({ type: saved.type });\n      });\n  }, [\n    dispatch,\n    shouldSave,\n    writeAccess,\n    items,\n    connections,\n    columns,\n    firestore,\n  ]);\n\n  return null;\n}\nexport default FirebaseSync;\n","import { useParams } from \"react-router-dom\";\nimport { createContext } from \"react\";\nimport { useSelector } from \"react-redux\";\nimport {\n  getColumns,\n  getConnections,\n} from \"../../redux/dependancies/dependanciesSlice\";\n\nconst FRAME_WIDTH = 2000;\n// const FRAME_HEIGHT = 2000;\n\nexport const TreeContext = createContext();\n\nexport function TreeContextProvider({ children }) {\n  const { itemId } = useParams();\n  const connections = useSelector(getConnections);\n  const columns = useSelector(getColumns);\n\n  let nodesToShow = [\n    {\n      rel: \"root\",\n      id: itemId,\n    },\n  ];\n\n  // Add all descendents and ancesstors\n  connections.forEach((connection) => {\n    if (connection.from === itemId) {\n      nodesToShow.push({\n        rel: \"descendant\",\n        id: connection.to,\n      });\n    }\n    if (connection.to === itemId) {\n      nodesToShow.push({\n        rel: \"ancesstor\",\n        id: connection.from,\n      });\n    }\n  });\n\n  // Assign the row and position in row\n  const colKeys = Object.keys(columns);\n\n  const rowLength = [];\n\n  let columnsLength = 0;\n\n  colKeys.forEach((colKey, index) => {\n    let rowCount = 0;\n    columns[colKey].items.forEach((item) => {\n      const nodeToShowIndex = nodesToShow.findIndex((node) => node.id === item);\n      if (nodeToShowIndex < 0) {\n        return;\n      }\n      nodesToShow[nodeToShowIndex].row = index;\n      nodesToShow[nodeToShowIndex].rowCount = rowCount++;\n      nodesToShow[nodeToShowIndex].col = columns[colKey].title;\n    });\n\n    rowLength[index] = rowCount;\n    columnsLength = Math.max(rowCount, columnsLength);\n  });\n\n  const nodes = nodesToShow.map((node) => {\n    return {\n      id: node.id,\n      rel: node.rel,\n      col: node.col,\n      descendants: connections.filter(({ from }) => from === node.id).length,\n      ancesstors: connections.filter(({ to }) => to === node.id).length,\n      position: {\n        x: FRAME_WIDTH / 2 + (rowLength[node.row] / 2 - node.rowCount) * 500,\n        y: node.row * 300,\n      },\n    };\n  });\n\n  const active = nodes.findIndex((node) => node.id === itemId);\n\n  return (\n    <TreeContext.Provider value={{ nodes, maxColumns: columnsLength, active }}>\n      {children}\n    </TreeContext.Provider>\n  );\n}\n","import { useEffect, useState } from \"react\";\n\nconst useViewport = () => {\n  const [viewport, setViewport] = useState({\n    width: window.innerWidth,\n    height: window.innerHeight,\n  });\n\n  useEffect(() => {\n    const handleWindowResize = () => {\n      setViewport({\n        width: window.innerWidth,\n        height: window.innerHeight,\n      });\n    };\n    window.addEventListener(\"resize\", handleWindowResize);\n    return () => window.removeEventListener(\"resize\", handleWindowResize);\n  }, []);\n\n  // Return the width so we can use it in our components\n  return viewport;\n};\n\nexport default useViewport;\n","import { useEffect, useContext, useMemo, useReducer } from \"react\";\nimport { TreeContext } from \"./TreeContext\";\nimport useViewport from \"../../hooks/useViewport\";\n\nfunction reducer(state, { type, payload }) {\n  switch (type) {\n    case \"MOUSE_DOWN\":\n      return {\n        ...state,\n        start: {\n          x: payload.x,\n          y: payload.y,\n        },\n        mouseDown: true,\n      };\n    case \"MOUSE_UP\":\n      return {\n        ...state,\n        mouseDown: false,\n        prev: { ...state.transform },\n      };\n    case \"MOVE\":\n      if (!state.mouseDown) {\n        return state;\n      }\n      const { start, prev } = state;\n      return {\n        ...state,\n        transform: {\n          x: prev.x - (start.x - payload.x),\n          y: prev.y - (start.y - payload.y),\n        },\n      };\n\n    default: {\n      return state;\n    }\n  }\n}\n\nfunction DraggableGroup({ children }) {\n  const [dragging, dispatch] = useReducer(reducer, {\n    transform: {\n      x: 0,\n      y: 0,\n    },\n    start: {\n      x: 0,\n      y: 0,\n    },\n    prev: {\n      x: 0,\n      y: 0,\n    },\n    mouseDown: false,\n  });\n\n  const { nodes, active } = useContext(TreeContext);\n\n  const viewport = useViewport();\n\n  const outerTransform = useMemo(() => {\n    const x = viewport.width / 2 - nodes[active].position.x - 150;\n    const y = viewport.height / 2 - nodes[active].position.y - 40;\n    return {\n      x,\n      y,\n    };\n  }, [viewport, nodes, active]);\n\n  useEffect(() => {\n    const eventHandler = () => {\n      dispatch({ type: \"MOUSE_UP\" });\n    };\n    document.addEventListener(\"mouseleave\", eventHandler);\n    return () => {\n      document.removeEventListener(\"mouseleave\", eventHandler);\n    };\n  }, [dispatch]);\n\n  return (\n    <>\n      <rect\n        fill=\"transparent\"\n        width=\"2000\"\n        height=\"2000\"\n        onMouseDown={(ev) => {\n          dispatch({\n            type: \"MOUSE_DOWN\",\n            payload: { x: ev.clientX, y: ev.clientY },\n          });\n        }}\n        onMouseMove={(ev) => {\n          dispatch({\n            type: \"MOVE\",\n            payload: {\n              x: ev.clientX,\n              y: ev.clientY,\n            },\n          });\n        }}\n        onMouseUp={(ev) => {\n          dispatch({ type: \"MOUSE_UP\" });\n        }}\n      ></rect>\n      <g\n        transform={`translate(${outerTransform.x} ${outerTransform.y})`}\n        style={{ userSelect: \"none\" }}\n      >\n        <g\n          transform={`translate(${dragging.transform.x} ${dragging.transform.y})`}\n        >\n          {children}\n        </g>\n      </g>\n    </>\n  );\n}\nexport default DraggableGroup;\n","import { createSlice } from \"@reduxjs/toolkit\";\n\nexport const optionsSlice = createSlice({\n  name: \"options\",\n  initialState: {\n    showOtherRelations: false,\n    showAllArrows: true,\n  },\n  reducers: {\n    setOption: (state, action) => {\n      const { key, value } = action.payload;\n      state[key] = value;\n    },\n  },\n});\n\nexport const { setOption } = optionsSlice.actions;\n\nexport const getShowOtherRelations = (state) =>\n  state?.options?.showOtherRelations;\n\nexport default optionsSlice.reducer;\n","import { useSelector } from \"react-redux\";\nimport styled from \"styled-components\";\nimport { getShowOtherRelations } from \"../../redux/options/optionsSlice\";\n\nconst NodeTitle = styled.text`\n  font: normal 18px sans-serif;\n  pointer-events: none;\n`;\n\nconst NodeDescription = styled.text`\n  font: normal 14px sans-serif;\n  pointer-events: none;\n`;\n\nconst NodeColumn = styled.text`\n  font: normal 14px sans-serif;\n  pointer-events: none;\n`;\n\nconst NodeBox = styled.rect`\n  fill: #fff;\n  stroke: #8099a4;\n  stroke-width: 1;\n  filter: \n    drop-shadow(0 3px 3px rgba(0,20,29,0.2)) \n    drop-shadow(0 2px 4px rgba(0,20,29,0.15));\n  ${(props) =>\n    props.root\n      ? `\n      stroke-width: 2;\n      fill: rgb(242, 245, 246);\n      `\n      : `\n      &:hover {\n        stroke-width: 2;\n        stroke: #008200;\n        cursor: pointer;\n      }\n    `}}\n`;\n\nconst OtherNodeLabel = ({ x, y, parentX, parentY, text }) => {\n  const line = `M ${parentX} ${parentY}, L ${x} ${y}`;\n  return (\n    <g>\n      <path\n        d={line}\n        strokeWidth=\"2\"\n        fill=\"transparent\"\n        stroke=\"rgba(0, 0, 0, 0.4)\"\n      />\n      <circle\n        cx={x}\n        cy={y}\n        r=\"16\"\n        fill=\"#ffffff\"\n        stroke=\"#8099a4\"\n        strokeWidth=\"1\"\n      />\n      <text x={x} y={y} textAnchor=\"middle\" dominantBaseline=\"central\">\n        {text}\n      </text>\n    </g>\n  );\n};\n\nfunction TreeNode({\n  selected,\n  itemDetails,\n  position = { x: 0, y: 0 },\n  rel,\n  descendants,\n  ancesstors,\n  col,\n}) {\n  const showOtherRelations = useSelector(getShowOtherRelations);\n\n  let descendantsLabel = \"\";\n  let ancesstorsLabel = \"\";\n\n  if (rel === \"ancesstor\") {\n    descendantsLabel = descendants - 1 > 0 ? `+${descendants - 1}` : \"\";\n    ancesstorsLabel = ancesstors;\n  }\n\n  if (rel === \"descendant\") {\n    descendantsLabel = descendants;\n    ancesstorsLabel = ancesstors - 1 > 0 ? `+${ancesstors - 1}` : \"\";\n  }\n\n  return (\n    <>\n      <g onClick={selected}>\n        <NodeBox\n          root={rel === \"root\"}\n          x={position.x.toString()}\n          y={position.y.toString()}\n          height=\"80\"\n          width=\"300\"\n        />\n\n        <NodeTitle\n          x={(position.x + 10).toString()}\n          y={(position.y + 30).toString()}\n        >\n          {itemDetails?.title}\n        </NodeTitle>\n\n        <NodeColumn\n          x={(position.x + 10).toString()}\n          y={(position.y + 60).toString()}\n        >\n          {col}\n        </NodeColumn>\n\n        <NodeDescription\n          x={(position.x + 10).toString()}\n          y={(position.y + 60).toString()}\n        >\n          {col}\n          {itemDetails?.description}\n        </NodeDescription>\n      </g>\n\n      {showOtherRelations && (\n        <>\n          {descendantsLabel > 0 && (\n            <OtherNodeLabel\n              x={(position.x + 240).toString()}\n              y={(position.y + 80 + 40).toString()}\n              parentX={position.x + 240}\n              parentY={position.y + 80}\n              text={descendantsLabel}\n            />\n          )}\n\n          {ancesstorsLabel > 0 && (\n            <OtherNodeLabel\n              x={(position.x + 240).toString()}\n              y={(position.y - 40).toString()}\n              parentX={position.x + 240}\n              parentY={position.y}\n              text={ancesstorsLabel}\n            />\n          )}\n        </>\n      )}\n    </>\n  );\n}\nexport default TreeNode;\n","import { useMemo } from \"react\";\nimport styled from \"styled-components\";\n\nconst TreeArrowsG = styled.g`\n  pointer-events: none;\n`;\n\nfunction TreeArrows({\n  activePosition = { x: 0, y: 0 },\n  position = { x: 0, y: 0 },\n  rel,\n}) {\n  const [line, triangle] = useMemo(() => {\n    if (activePosition.y > position.y) {\n      const xStart = position.x + 150;\n      const yStart = position.y + 80;\n\n      const xEnd = activePosition.x + 150;\n      const yEnd = activePosition.y;\n\n      return [\n        ` M ${xStart} ${yStart},\n            C ${xStart} ${yStart + 100},\n            ${xEnd} ${yEnd - 100},\n            ${xEnd} ${yEnd - 10}\n            L ${xEnd} ${yEnd}`,\n        `${xEnd},${yEnd} ${xEnd - 5},${yEnd - 10} ${xEnd + 5},${yEnd - 10}`,\n      ];\n    } else if (activePosition.y < position.y) {\n      const xStart = activePosition.x + 150;\n      const yStart = activePosition.y + 80;\n\n      const xEnd = position.x + 150;\n      const yEnd = position.y;\n\n      return [\n        ` M ${xStart} ${yStart},\n              C ${xStart} ${yStart + 100},\n              ${xEnd} ${yEnd - 100},\n              ${xEnd} ${yEnd - 10}\n              L ${xEnd} ${yEnd}`,\n        `${xEnd},${yEnd} ${xEnd - 5},${yEnd - 10} ${xEnd + 5},${yEnd - 10}`,\n      ];\n    } else if (rel === \"ancesstor\") {\n      const xStart = position.x + 150;\n      const yStart = position.y;\n\n      const xEnd = activePosition.x + 150;\n      const yEnd = activePosition.y;\n\n      return [\n        ` M ${xStart} ${yStart},\n              C ${xStart} ${yStart - 80},\n              ${xEnd} ${yEnd - 80},\n              ${xEnd} ${yEnd - 10}\n              L ${xEnd} ${yEnd}`,\n        `${xEnd},${yEnd} ${xEnd - 5},${yEnd - 10} ${xEnd + 5},${yEnd - 10}`,\n      ];\n\n      // return [{ x: 0, y: 0 }, ``, ``];\n    } else {\n      const xStart = activePosition.x + 150;\n      const yStart = activePosition.y + 80;\n\n      const xEnd = position.x + 150;\n      const yEnd = position.y + 80;\n\n      return [\n        ` M ${xStart} ${yStart},\n              C ${xStart} ${yStart + 80},\n              ${xEnd} ${yEnd + 80},\n              ${xEnd} ${yEnd + 10}\n              L ${xEnd} ${yEnd}`,\n        `${xEnd},${yEnd} ${xEnd - 5},${yEnd + 10} ${xEnd + 5},${yEnd + 10}`,\n      ];\n    }\n  }, [position, activePosition, rel]);\n\n  return (\n    <TreeArrowsG>\n      <path\n        d={line}\n        strokeWidth=\"2\"\n        fill=\"transparent\"\n        stroke=\"rgba(0, 0, 0, 0.4)\"\n      ></path>\n      <polygon points={triangle} fill=\"black\" />\n    </TreeArrowsG>\n  );\n}\n\nexport default TreeArrows;\n","import TreeNode from \"./TreeNode\";\nimport { useCallback, useContext, useMemo } from \"react\";\nimport { TreeContext } from \"./TreeContext\";\nimport { useSelector } from \"react-redux\";\nimport { getItems } from \"../../redux/dependancies/dependanciesSlice\";\nimport TreeArrows from \"./TreeArrows\";\nimport { useHistory } from \"react-router\";\n\nfunction TreeContents() {\n  const { nodes, active } = useContext(TreeContext);\n  const items = useSelector(getItems);\n  const history = useHistory();\n\n  const activePosition = useMemo(() => {\n    return nodes[active].position;\n  }, [nodes, active]);\n\n  const switchItem = useCallback(\n    (id) => {\n      history.push(`/tree/${id}`);\n    },\n    [history]\n  );\n\n  return (\n    <>\n      {nodes && (\n        <>\n          {nodes.map((node, index) => {\n            if (node.rel === \"root\") {\n              return null;\n            }\n            return (\n              <TreeArrows\n                key={index}\n                rel={node.rel}\n                position={node.position}\n                activePosition={activePosition}\n              />\n            );\n          })}\n          {nodes.map((node, index) => (\n            <TreeNode\n              selected={() => {\n                switchItem(node.id);\n              }}\n              key={index}\n              itemDetails={items[node.id]}\n              {...node}\n            />\n          ))}\n        </>\n      )}\n    </>\n  );\n}\n\nexport default TreeContents;\n","import { useEffect, useState } from \"react\";\nimport DraggableGroup from \"./DraggableGroup\";\nimport styled from \"styled-components\";\n\nimport useViewport from \"../../hooks/useViewport\";\n\nimport TreeContents from \"./TreeContents\";\nimport { TreeContextProvider } from \"./TreeContext\";\n\nconst TreeViewWrap = styled.div`\n  width: calc(100vw - 320px);\n  height: 100vh;\n  position: relative;\n`;\n\nconst TreeViewSVG = styled.svg`\n  position: absolute;\n  left: 0;\n  top: 0;\n`;\n\nfunction TreeView() {\n  const viewport = useViewport();\n  const [svgProps, setSvgProps] = useState({\n    height: 300,\n    width: 600,\n    viewbox: `0 0 600 300`,\n  });\n\n  useEffect(() => {\n    const { width, height } = viewport;\n    setSvgProps({\n      width: width - 320,\n      height,\n      viewbox: `0 0 ${width - 320} ${height}`,\n    });\n  }, [viewport, setSvgProps]);\n\n  return (\n    <TreeViewWrap>\n      <TreeContextProvider>\n        <TreeViewSVG\n          preserveAspectRatio=\"none\"\n          xmlns=\"http://www.w3.org/2000/svg\"\n          {...svgProps}\n        >\n          <DraggableGroup>\n            <TreeContents />\n          </DraggableGroup>\n        </TreeViewSVG>\n      </TreeContextProvider>\n    </TreeViewWrap>\n  );\n}\nexport default TreeView;\n","import { createContext, useState, useCallback } from \"react\";\n\nexport const ClickAndDrag = createContext();\n\nexport const ClickAndDragProvider = ({ children }) => {\n  const [state, setState] = useState(false);\n\n  const drag = useCallback(() => {\n    setState(true);\n  }, [setState]);\n\n  const drop = useCallback(() => {\n    setState(false);\n  }, [setState]);\n\n  return (\n    <ClickAndDrag.Provider\n      value={{\n        linking: state,\n        drag,\n        drop,\n      }}\n    >\n      {children}\n    </ClickAndDrag.Provider>\n  );\n};\n","import { createContext, useCallback, useReducer } from \"react\";\n\nexport const Refs = createContext({});\n\nfunction reducer(state, { type, payload }) {\n  switch (type) {\n    case \"ADD\": {\n      const { id, ref } = payload;\n      return {\n        ...state,\n        [id]: ref,\n      };\n    }\n    case \"REMOVE\": {\n      const { id } = payload;\n      const newState = { ...state };\n      delete newState[id];\n      return newState;\n    }\n    default:\n      return state;\n  }\n}\n\nexport const RefsProvider = ({ children }) => {\n  const [state, dispatch] = useReducer(reducer, {});\n\n  const addRef = useCallback(\n    (id, ref) => {\n      dispatch({ type: \"ADD\", payload: { id, ref } });\n    },\n    [dispatch]\n  );\n\n  const removeRef = useCallback(\n    (id) => {\n      dispatch({ type: \"REMOVE\", payload: { id } });\n    },\n    [dispatch]\n  );\n\n  return (\n    <Refs.Provider\n      value={{\n        refs: state,\n        addRef,\n        removeRef,\n      }}\n    >\n      {children}\n    </Refs.Provider>\n  );\n};\n","import { createSlice } from \"@reduxjs/toolkit\";\n\nexport const connectionsSlice = createSlice({\n  name: \"connections\",\n  initialState: {\n    scrollLeft: 0,\n  },\n  reducers: {\n    updateScrollLeft: (state, action) => {\n      const { value } = action.payload;\n      state.scrollLeft = value;\n    },\n  },\n});\n\nexport const {\n    updateScrollLeft,\n} = connectionsSlice.actions;\n\nexport const getScrollLeft = (state) => state?.connections?.scrollLeft;\n\nexport default connectionsSlice.reducer;\n","import { useMemo, useContext, useEffect, useRef, useState } from \"react\";\nimport { Refs } from \"../../context/refs\";\n\nimport useViewport from \"../../hooks/useViewport\";\n\nimport { useSelector } from \"react-redux\";\nimport { getConnections } from \"../../redux/dependancies/dependanciesSlice\";\nimport styled from \"styled-components\";\nimport { getScrollLeft } from \"../../redux/connections/connectionsSlice\";\n\nconst ConnectionsWrap = styled.div`\n  pointer-events: none;\n  position: absolute;\n  bottom: 0;\n  right: 0;\n  left: 0;\n  top: 0;\n`;\n\nconst Svg = styled.svg`\n  width: 100%;\n  height: 100%;\n  display: block;\n`;\n\nfunction Connections() {\n  const connections = useSelector(getConnections);\n  const scrollLeft = useSelector(getScrollLeft);\n\n  const refsContext = useContext(Refs);\n\n  const [svgProps, setSvgProps] = useState({\n    width: 100,\n    height: 100,\n    viewBox: `0 0 100 100`,\n  });\n\n  const viewport = useViewport();\n\n  const ref = useRef(null);\n\n  const lines = useMemo(() => {\n    const { scrollTop } = document.documentElement;\n\n    return connections\n      ?.map(({ from, to }) => {\n        try {\n          const fromRef = refsContext.refs[from];\n          const toRef = refsContext.refs[to];\n\n          const fromClientRect = fromRef.getBoundingClientRect();\n          const xStart = fromClientRect.right - 320;\n          const yStart =\n            fromClientRect.top + scrollTop + fromClientRect.height / 2;\n\n          const toClientRect = toRef.getBoundingClientRect();\n          let xEnd = toClientRect.right - 320;\n          let yEnd = toClientRect.top + scrollTop + toClientRect.height / 2;\n\n          if (xStart === xEnd || Math.abs(xStart - xEnd) < 1) {\n            // modifier is negative if to is below from\n            const modifier = yStart > yEnd ? 1 : -1;\n            yEnd = yEnd + (modifier * toClientRect.height) / 4;\n\n            return {\n              line: `M ${xStart} ${yStart} \n          C ${xStart + 40} ${yStart}, \n            ${xEnd + 40} ${yEnd}, \n            ${xEnd} ${yEnd}`,\n              start: { x: xStart, y: yStart },\n            };\n          } else {\n            xEnd = toClientRect.left - 320;\n\n            return {\n              line: `M ${xStart} ${yStart} \n            C ${xStart + 40} ${yStart}, \n              ${xEnd - 40} ${yEnd}, \n              ${xEnd} ${yEnd}`,\n              start: { x: xStart, y: yStart },\n            };\n          }\n\n          // return `M ${x1} ${y1} , L ${x2}, ${y2}`;\n          // return `M ${x1} ${y1} C ${x1} ${y1}, ${x1 + 20} ${y1}, ${x2} ${y2}`;\n\n          // return `M ${xStart} ${yStart} C ${xStart} ${yStart}, ${xStart + 50} ${\n          //   yStart + 50\n          // }, ${xEnd} ${yEnd}`;\n        } catch (err) {\n          console.log(err);\n        }\n        return null;\n      })\n      ?.filter((line) => !!line)\n      .map(({ start, line }, index) => {\n        return (\n          <g key={index}>\n            <path\n              d={line}\n              strokeWidth=\"2\"\n              fill=\"transparent\"\n              stroke=\"rgba(0, 0, 0, 0.4)\"\n            ></path>\n            <circle cx={start.x} cy={start.y} r=\"4\" fill=\"rgb(0, 0, 0)\" />\n          </g>\n        );\n      });\n  }, [viewport, scrollLeft, connections, refsContext]);\n\n  useEffect(() => {\n    if (!viewport || !ref?.current) {\n      return;\n    }\n    setSvgProps({\n      height: viewport.height,\n      width: viewport.width,\n      viewBox: `0 0 ${viewport.height} ${viewport.width}`,\n    });\n  }, [viewport, ref, setSvgProps]);\n\n  return (\n    <ConnectionsWrap ref={ref}>\n      <Svg\n        preserveAspectRatio=\"none\"\n        xmlns=\"http://www.w3.org/2000/svg\"\n        height={svgProps.height}\n        width={svgProps.width}\n        viewbox={svgProps.viewBox}\n      >\n        {lines}\n      </Svg>\n    </ConnectionsWrap>\n  );\n}\n\nexport default Connections;\n","import { createSlice } from \"@reduxjs/toolkit\";\n\nexport const linkingSlice = createSlice({\n  name: \"linking\",\n  initialState: {\n    source: false,\n  },\n  reducers: {\n    startLinking: (state, action) => {\n      state.source = action.payload.id;\n    },\n    doneLinking: (state) => {\n      state.source = false;\n    },\n  },\n});\n\nexport const { startLinking, doneLinking } = linkingSlice.actions;\n\nexport const getLinkingSource = (state) => state?.linking?.source;\nexport const getIsLinking = (state) => !!state?.linking?.source;\n\nexport default linkingSlice.reducer;\n","const statuses = {\n  unknown: {\n    color: \"grey\",\n    text: \"Unknown\",\n    description: null,\n  },\n  stable: {\n    color: \"green\",\n    text: \"Stable\",\n    description: null,\n  },\n  underReview: {\n    color: \"orange\",\n    text: \"Under Review\",\n    description: null,\n  },\n  unstable: {\n    color: \"darkorange\",\n    text: \"Unstable\",\n    description: null,\n  },\n  outdated: {\n    color: \"red\",\n    text: \"Outdated \",\n    description: null,\n  },\n  deprecated: {\n    color: \"darkslategray\",\n    text: \"Deprecated\",\n    description: null,\n  },\n};\n\nexport default statuses;\n","import { useCallback, useState } from \"react\";\nimport { useDispatch } from \"react-redux\";\nimport styled from \"styled-components\";\n\nimport statuses from \"../../data/statuses\";\n\nimport Button from \"carbon-react/lib/components/button\";\nimport Textbox from \"carbon-react/lib/__experimental__/components/textbox\";\nimport Typography from \"carbon-react/lib/components/typography\";\nimport Confirm from \"carbon-react/lib/components/confirm\";\nimport { Select, Option } from \"carbon-react/lib/components/select\";\n\nimport { updateItem } from \"../../redux/dependancies/dependanciesSlice\";\n\nimport { removeItem } from \"../../redux/dependancies/dependanciesSlice\";\n\nconst ItemButtons = styled.div`\n  display: flex;\n  justify-content: flex-end;\n  gap: 1rem;\n`;\n\nconst Circle = styled.span`\n  display: inline-block;\n  width: 12px;\n  height: 12px;\n  border-radius: 50%;\n  margin: 0 0.5rem;\n  vertical-align: middle;\n  ${(props) => props.color && `background: ${props.color};`}\n`;\n\nfunction NodeEditor({ itemId, item, doneEditing }) {\n  const dispatch = useDispatch();\n  const [confirmDelete, setConfirmDelete] = useState(false);\n\n  const update = useCallback(\n    (key, val) => {\n      dispatch({\n        type: updateItem.type,\n        payload: {\n          id: itemId,\n          update: {\n            [key]: val,\n          },\n        },\n      });\n    },\n    [itemId, dispatch]\n  );\n\n  return (\n    <form\n      onSubmit={(ev) => {\n        ev.preventDefault();\n      }}\n    >\n      <Typography>\n        <Textbox\n          labelInline\n          label=\"Name\"\n          size=\"small\"\n          value={item.title}\n          onChange={(ev) => {\n            update(\"title\", ev.target.value);\n          }}\n          required\n        />\n      </Typography>\n      <Typography>\n        <Select\n          labelInline\n          name=\"simple\"\n          size=\"small\"\n          label=\"Status\"\n          value={item.status}\n          onChange={(ev) => {\n            update(\"status\", ev.target.value);\n          }}\n        >\n          {Object.keys(statuses).map((status) => {\n            return (\n              <Option value={status} key={status}>\n                <Circle color={statuses[status].color} />\n                {statuses[status].text}\n              </Option>\n            );\n          })}\n        </Select>\n      </Typography>\n      <Typography>\n        <Textbox\n          labelInline\n          label=\"Description\"\n          value={item.description}\n          size=\"small\"\n          onChange={(ev) => update(\"description\", ev.target.value)}\n        />\n      </Typography>\n      <ItemButtons>\n        <Button size=\"small\" onClick={setConfirmDelete}>\n          Delete\n        </Button>\n\n        <Button\n          buttonType=\"primary\"\n          size=\"small\"\n          onClick={doneEditing}\n          type=\"submit\"\n        >\n          Done\n        </Button>\n      </ItemButtons>\n\n      <Confirm\n        title=\"Delete item\"\n        open={confirmDelete}\n        onConfirm={() => {\n          setConfirmDelete(false);\n          requestAnimationFrame(() => {\n            dispatch({ type: removeItem.type, payload: { id: itemId } });\n          });\n        }}\n        onCancel={() => setConfirmDelete(false)}\n      >\n        Are you sure?\n      </Confirm>\n    </form>\n  );\n}\n\nexport default NodeEditor;\n","import { useMemo } from \"react\";\nimport styled from \"styled-components\";\nimport { useSelector } from \"react-redux\";\nimport { getUserDetails } from \"../../redux/user/userSlice\";\nimport Button from \"carbon-react/lib/components/button\";\n\nconst ButtonWrap = styled.div`\n  display: none;\n  position: absolute;\n  right: 0;\n  bottom: 0;\n`;\n\nconst CommentMeta = styled.div`\n  margin-bottom: 0.7rem;\n  display: flex;\n  gap: 0.5rem;\n`;\nconst CommentContent = styled.div`\n  font-size: 16px;\n  background: rgba(0, 0, 0, 0.1);\n  padding: 1rem;\n  position: relative;\n  &::before {\n    content: \"\";\n    display: block;\n    position: absolute;\n    left: 0;\n    bottom: 100%;\n    border-right: 0.6rem solid transparent;\n    border-bottom: 0.6rem solid rgba(0, 0, 0, 0.1);\n  }\n`;\n\nconst CommentAuthor = styled.div`\n  font-weight: 600;\n`;\n\nconst CommentWrap = styled.div`\n  margin-bottom: 1rem;\n  width: 66%;\n  ${(props) => props.align === \"right\" && \"margin-left: auto;\"}\n  .date {\n    opacity: 0;\n  }\n  &:hover {\n    .date {\n      opacity: 1;\n    }\n  }\n  ${(props) =>\n    props.align === \"right\" &&\n    `${CommentMeta} {\n      flex-direction: row-reverse;\n    }\n    ${CommentContent}::before {\n      right: 0;\n      left: auto;\n      border-left: 0.6rem solid transparent;\n      border-right: none;\n    }\n    `}\n  &:focus-within ${ButtonWrap} {\n    display: block;\n  }\n`;\n\nfunction SingleComment({ comment, deleteComment }) {\n  const userDetails = useSelector(getUserDetails);\n\n  const dateFormatted = useMemo(\n    () =>\n      comment?.datetime?.seconds\n        ? new Date(comment.datetime.seconds * 1000).toLocaleString({\n            weekday: \"long\",\n            year: \"numeric\",\n            month: \"long\",\n          })\n        : null,\n    [comment.datetime]\n  );\n\n  const fromSelf = userDetails?.email === comment.author;\n\n  return (\n    <CommentWrap align={fromSelf ? \"right\" : \"left\"}>\n      <CommentMeta>\n        <CommentAuthor>{fromSelf ? \"You\" : comment.author}</CommentAuthor>\n        {dateFormatted && <div className=\"date\">{dateFormatted}</div>}\n      </CommentMeta>\n      <CommentContent tabIndex=\"0\">\n        {comment?.content}\n        {fromSelf && (\n          <ButtonWrap>\n            <Button\n              size=\"small\"\n              buttonType=\"tertiary\"\n              onClick={deleteComment}\n              type=\"button\"\n              destructive\n            >\n              Delete?\n            </Button>\n          </ButtonWrap>\n        )}\n      </CommentContent>\n    </CommentWrap>\n  );\n}\nexport default SingleComment;\n","import styled from \"styled-components\";\n\nimport SingleComment from \"./SingleComment\";\n\nconst CommentHistoryBox = styled.div`\n  min-height: 100px;\n  max-height: 400px;\n  overflow-y: auto;\n  border: 1px solid;\n  display: flex;\n  flex-direction: column;\n  padding: .5rem 2rem;\n`;\n\nconst NoComments = styled.div`\n  margin: auto;\n`;\n\nfunction CommentHistory({ comments = [], deleteComment }) {\n  return (\n    <CommentHistoryBox>\n      {comments.length === 0 && <NoComments>No comments</NoComments>}\n      {comments.map((comment) => (\n        <SingleComment key={comment.key} comment={comment} deleteComment={() => deleteComment(comment.key)}/>\n      ))}\n    </CommentHistoryBox>\n  );\n}\n\nexport default CommentHistory;\n","import styled from \"styled-components\";\n\nimport Textarea from \"carbon-react/lib/__experimental__/components/textarea\";\nimport Button from \"carbon-react/lib/components/button\";\nimport { useState } from \"react\";\n\nconst Actions = styled.div`\n  margin-top: 1rem;\n  display: flex;\n  justify-content: flex-start;\n  flex-direction: row-reverse;\n`;\n\nconst Form = styled.form`\n  display: block;\n  margin-top: 2rem;\n`;\n\nfunction NewComment({ onSubmit, onCancel }) {\n  const [message, setMessage] = useState(\"\");\n  const handleSubmit = (ev) => {\n    ev.preventDefault();\n    onSubmit(message.trim());\n    setMessage(\"\");\n  };\n  return (\n    <Form onSubmit={handleSubmit}>\n      <Textarea\n        label=\"Add a comment\"\n        required\n        rows={2}\n        value={message}\n        onChange={(ev) => setMessage(ev.target.value)}\n      />\n      <Actions>\n        <Button buttonType=\"primary\" ml={2} type=\"submit\">\n          Send\n        </Button>\n        <Button buttonType=\"secondary\" type=\"reset\" onClick={onCancel}>\n          Cancel\n        </Button>\n      </Actions>\n    </Form>\n  );\n}\n\nexport default NewComment;\n","import { useCallback, useMemo, useEffect } from \"react\";\n\nimport Dialog from \"carbon-react/lib/components/dialog\";\nimport Loader from \"carbon-react/lib/components/loader\";\n\nimport { useFirestore, useFirestoreCollectionData } from \"reactfire\";\n\nimport CommentHistory from \"./CommentHistory\";\nimport NewComment from \"./NewComment\";\nimport { useSelector } from \"react-redux\";\nimport { getUserDetails } from \"../../redux/user/userSlice\";\n\nfunction Comments({ itemId, close }) {\n  const firestore = useFirestore();\n\n  const itemRef = useMemo(() => firestore.collection(\"items\").doc(itemId), [\n    itemId,\n    firestore,\n  ]);\n\n  const messagesRef = useMemo(() => itemRef.collection(\"messages\"), [itemRef]);\n\n  const userDetails = useSelector(getUserDetails);\n\n  const threadMessages = useFirestoreCollectionData(messagesRef, {\n    idField: \"key\",\n  });\n\n  const comments = useMemo(() => threadMessages?.data || [], [threadMessages]);\n\n  const addComment = useCallback(\n    (comment) => {\n      const now = Date.now();\n      itemRef.update({\n        messageCount: threadMessages.data.length + 1,\n      });\n      messagesRef.add({\n        author: userDetails.email,\n        content: comment,\n        datetime: {\n          seconds: Math.floor(now / 1000),\n          milliseconds: now % 1000,\n        },\n      });\n    },\n    [userDetails, itemRef, messagesRef, threadMessages]\n  );\n\n  const deleteComment = useCallback(\n    (id) => {\n      console.log(id);\n      messagesRef.doc(id).delete();\n    },\n    [messagesRef]\n  );\n\n  useEffect(() => {\n    console.log({ itemId, comments });\n  }, [comments, itemId]);\n\n  return (\n    <>\n      <Dialog\n        open={true}\n        onCancel={() => close()}\n        title=\"Comments\"\n        size=\"medium\"\n      >\n        {threadMessages.status === \"loading\" ? (\n          <div>\n            <Loader size=\"large\" />\n          </div>\n        ) : (\n          <>\n            <CommentHistory\n              comments={comments}\n              deleteComment={(id) => deleteComment(id)}\n            />\n            <NewComment\n              onSubmit={(message) => {\n                console.log({ message });\n                addComment(message);\n              }}\n              onCancel={close}\n            />\n          </>\n        )}\n      </Dialog>\n    </>\n  );\n}\n\nexport default Comments;\n","import {\n  useContext,\n  useCallback,\n  useRef,\n  useState,\n  useMemo,\n  useEffect,\n} from \"react\";\nimport { useHistory } from \"react-router\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport styled from \"styled-components\";\n\nimport Button from \"carbon-react/lib/components/button\";\nimport Content from \"carbon-react/lib/components/content\";\nimport Icon from \"carbon-react/lib/components/icon\";\nimport IconButton from \"carbon-react/lib/components/icon-button\";\nimport Tile from \"carbon-react/lib/components/tile\";\nimport Pill from \"carbon-react/lib/components/pill\";\nimport Typography from \"carbon-react/lib/components/typography\";\n\nimport { Refs } from \"../../context/refs\";\n\nimport {\n  getItems,\n  addConnection,\n} from \"../../redux/dependancies/dependanciesSlice\";\n\nimport { getCommentAccess, getReadOnly } from \"../../redux/user/userSlice\";\n\nimport {\n  startLinking,\n  doneLinking,\n  getIsLinking,\n  getLinkingSource,\n} from \"../../redux/linking/linkingSlice\";\n\nimport NodeEditor from \"./NodeEditor\";\n\nimport statuses from \"../../data/statuses\";\nimport Comments from \"../Comments/Comments\";\n\nconst CommentBtnWrap = styled.div`\n  position: absolute;\n  right: 0;\n  top: 0;\n`;\n\nconst ColumnItemEle = styled.div`\n  position: relative;\n  margin-bottom: 1.5rem;\n  ${(props) =>\n    props.linking\n      ? `\n      cursor:pointer;\n      &:hover {\n        border-color: red;\n      }`\n      : \"\"}\n`;\n\nconst ItemButtons = styled.div`\n  display: flex;\n  justify-content: flex-end;\n  gap: 0.5rem;\n`;\n\nconst ReadOnlyView = styled.div`\n  position: relative;\n  padding-left: 1rem;\n`;\n\nfunction ColumnItem({ itemId }) {\n  const ref = useRef(null);\n\n  const [edittable, setEdittable] = useState(false);\n\n  const [showComments, setShowComments] = useState(false);\n\n  const dispatch = useDispatch();\n  const history = useHistory();\n\n  const items = useSelector(getItems);\n  const linkingSource = useSelector(getLinkingSource);\n  const linking = useSelector(getIsLinking);\n\n  const readonly = useSelector(getReadOnly);\n  const commentAccess = useSelector(getCommentAccess);\n\n  const { addRef, removeRef } = useContext(Refs);\n\n  const item = useMemo(() => {\n    return items[itemId];\n  }, [items, itemId]);\n\n  const startEditing = useCallback(\n    (ev) => {\n      ev.preventDefault();\n      setEdittable(true);\n      requestAnimationFrame(() => {\n        ref.current?.querySelector(\"input\")?.focus();\n      });\n    },\n    [setEdittable, ref]\n  );\n\n  const doneEditing = useCallback(() => {\n    setEdittable(false);\n  }, [setEdittable]);\n\n  const viewTree = useCallback(\n    (ev) => {\n      ev.preventDefault();\n      history.push(`/tree/${itemId}`);\n    },\n    [history, itemId]\n  );\n\n  // Add a link\n  const addLink = useCallback(() => {\n    if (linking && linkingSource !== itemId) {\n      dispatch({\n        type: addConnection.type,\n        payload: { from: linkingSource, to: itemId },\n      });\n    }\n  }, [linking, linkingSource, dispatch, itemId]);\n\n  // Start linking\n  const startLinkingFromNode = useCallback(\n    (ev) => {\n      ev.preventDefault();\n      dispatch({\n        type: startLinking.type,\n        payload: { id: itemId },\n      });\n    },\n    [dispatch, itemId]\n  );\n\n  useEffect(() => {\n    addRef(itemId, ref.current);\n    return () => {\n      removeRef(itemId);\n    };\n  }, [addRef, removeRef, ref, itemId]);\n\n  useEffect(() => {\n    if (linking !== itemId) {\n      return;\n    }\n    const exitlinking = (ev) => {\n      if (ev.key === \"Escape\") {\n        dispatch({ type: doneLinking.type });\n      }\n    };\n    window.addEventListener(\"keydown\", exitlinking);\n    return () => {\n      window.removeEventListener(\"keydown\", exitlinking);\n    };\n  }, [itemId, linking, dispatch]);\n\n  return (\n    <ColumnItemEle ref={ref} onClick={addLink} linking={!!linking} id={itemId}>\n      <Tile orientation=\"vertical\" pixelWidth={320}>\n        <Content>\n          {edittable ? (\n            <NodeEditor {...{ itemId, item, doneEditing }} />\n          ) : (\n            <ReadOnlyView>\n              <div\n                style={{\n                  position: \"absolute\",\n                  right: \"100%\",\n                  top: \"50%\",\n                  transform: \"translate(.5rem, -50%)\",\n                  cursor: \"pointer\",\n                }}\n              >\n                <Icon fontSize=\"medium\" type=\"drag_vertical\" />\n              </div>\n\n              <Typography variant=\"h3\" mb={1}>\n                {item.title ?? \"\\u00A0\"}\n              </Typography>\n\n              {item.status && (\n                <Pill mb={1} borderColor={statuses[item.status]?.color} fill>\n                  {statuses[item.status]?.text}\n                </Pill>\n              )}\n\n              {item.description && (\n                <Typography mb={2}>{item.description}</Typography>\n              )}\n\n              <ItemButtons>\n                {linkingSource === itemId ? (\n                  <Button\n                    size=\"small\"\n                    variant=\"primary\"\n                    onClick={() => dispatch({ type: doneLinking.type })}\n                  >\n                    Done\n                  </Button>\n                ) : (\n                  <>\n                    {!readonly && (\n                      <>\n                        <Button\n                          size=\"small\"\n                          onClick={startEditing}\n                          disabled={!!linking}\n                        >\n                          Edit\n                        </Button>\n                        <Button\n                          size=\"small\"\n                          onClick={startLinkingFromNode}\n                          disabled={!!linking}\n                        >\n                          Link\n                        </Button>\n                      </>\n                    )}\n\n                    <Button\n                      size=\"small\"\n                      onClick={viewTree}\n                      disabled={!!linking}\n                    >\n                      Tree\n                    </Button>\n                  </>\n                )}\n              </ItemButtons>\n\n              {commentAccess && (\n                <CommentBtnWrap>\n                  <IconButton\n                    size=\"small\"\n                    onAction={() => setShowComments(true)}\n                  >\n                    <Icon type=\"talk\" />\n                  </IconButton>\n                </CommentBtnWrap>\n              )}\n            </ReadOnlyView>\n          )}\n        </Content>\n      </Tile>\n\n      {showComments && (\n        <Comments\n          itemId={itemId}\n          close={() => {\n            setShowComments(false);\n          }}\n        />\n      )}\n    </ColumnItemEle>\n  );\n}\n\nexport default ColumnItem;\n","import { useMemo, useRef } from \"react\";\nimport IconButton from \"carbon-react/lib/components/icon-button\";\nimport Icon from \"carbon-react/lib/components/icon\";\nimport styled from \"styled-components\";\nimport { useSelector, useDispatch } from \"react-redux\";\n\nimport { getReadOnly } from \"../../redux/user/userSlice\";\n\nimport {\n  addItem,\n  getColumns,\n  updateColumn,\n} from \"../../redux/dependancies/dependanciesSlice\";\n\nimport ColumnItem from \"./ColumnItem\";\n\nconst ColumnEle = styled.div`\n  display: flex;\n  padding: 0 2.5rem;\n  flex: 0 0 320px;\n  flex-direction: column;\n  border-right: 2px solid #8099a4;\n`;\n\nconst ColumnVerticalList = styled.div`\n  display: flex;\n  flex-direction: column;\n  flex: 1 1 100%;\n  align-items: center;\n  ${(props) => props.justify && `justify-content: ${props.justify};`}\n`;\n\nconst ColumnTitle = styled.div`\n  position: sticky;\n  top: 0;\n  left: 0;\n  right: 0;\n  padding: 1.5rem 0;\n  display: flex;\n  gap: 1rem;\n`;\n\nconst ColumnTitleText = styled.h2`\n  font-size: 18px;\n  font-weight: 600;\n  padding: 0.5rem;\n  border-bottom: 2px solid transparent;\n  margin: 0;\n`;\n\nconst ColumnTitleEditable = styled.input`\n  border: none;\n  background: none;\n  font-family: inherit;\n  font-size: 18px;\n  font-weight: 600;\n  padding: 0.5rem;\n  border-radius: 0;\n  width: 100%;\n  border-bottom: 2px solid transparent;\n  box-sizing: border-box;\n  &:focus {\n    outline: none;\n    border-bottom: 2px solid #0077c8;\n  }\n`;\n\nconst EditableWrap = styled.div`\n  flex: 1 0 auto;\n  position: relative;\n`;\n\nconst EditableIcon = styled.div`\n  position: absolute;\n  right: 0;\n  top: 0.5rem;\n  cursor: pointer;\n`;\n\nfunction Column({ justify = \"flex-start\", colId }) {\n  const dispatch = useDispatch();\n  const columns = useSelector(getColumns);\n\n  const column = useMemo(() => columns[colId], [colId, columns]);\n  const readonly = useSelector(getReadOnly);\n  const titleInput = useRef(null);\n\n  return (\n    <ColumnEle>\n      <ColumnTitle>\n        {readonly ? (\n          <ColumnTitleText>{column?.title}</ColumnTitleText>\n        ) : (\n          <>\n            <EditableWrap>\n              <ColumnTitleEditable\n                ref={titleInput}\n                value={column?.title}\n                type=\"text\"\n                onChange={(ev) => {\n                  dispatch({\n                    type: updateColumn.type,\n                    payload: { id: colId, title: ev.target.value },\n                  });\n                }}\n              />\n              <EditableIcon\n                onClick={() => {\n                  titleInput.current.focus();\n                }}\n              >\n                <Icon type=\"edit\" />\n              </EditableIcon>\n            </EditableWrap>\n            <IconButton\n              type=\"button\"\n              onAction={(ev) => {\n                ev.preventDefault();\n                dispatch({\n                  type: addItem.type,\n                  payload: {\n                    column: colId,\n                  },\n                });\n              }}\n            >\n              <Icon bgTheme=\"info\" bgSize=\"large\" type=\"plus\" />\n            </IconButton>\n          </>\n        )}\n      </ColumnTitle>\n\n      <ColumnVerticalList justify={justify}>\n        {column?.items?.map((itemId) => (\n          <ColumnItem key={itemId} itemId={itemId} />\n        ))}\n      </ColumnVerticalList>\n    </ColumnEle>\n  );\n}\n\nexport default Column;\n","import { useCallback, useRef } from \"react\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport styled from \"styled-components\";\nimport { ClickAndDragProvider } from \"../../context/clickAndDrag\";\nimport { RefsProvider } from \"../../context/refs\";\nimport { getColumns } from \"../../redux/dependancies/dependanciesSlice\";\n\nimport Connections from \"./Connections\";\nimport Column from \"./Column\";\nimport { updateScrollLeft } from \"../../redux/connections/connectionsSlice\";\n\nconst ColumnsViewWrap = styled.div`\n  min-height: 100vh;\n  display: flex;\n  flex-direction: column;\n  align-items: stretch;\n  position: relative;\n`;\nconst ColumnsScrollableWrap = styled.div`\n  width: 100%;\n  display: flex;\n  flex: 1 1 100%;\n  overflow-x: scroll;\n  scroll-behaviour: smooth;\n`;\n\nconst Provders = ({ children }) => (\n  <ClickAndDragProvider>\n    <RefsProvider>{children}</RefsProvider>\n  </ClickAndDragProvider>\n);\n\nfunction ColumnsView() {\n  const columns = useSelector(getColumns);\n  const dispatch = useDispatch();\n\n  const scrollable = useRef(null);\n\n  const handleScroll = useCallback(\n    (ev) => {\n      dispatch({\n        type: updateScrollLeft.type,\n        payload: { value: ev.target.scrollLeft },\n      });\n    },\n    [dispatch]\n  );\n\n  return (\n    <Provders>\n      <Connections />\n      <ColumnsViewWrap>\n        <ColumnsScrollableWrap ref={scrollable} onScroll={handleScroll}>\n          {Object.keys(columns).map((colId) => (\n            <Column key={colId} colId={colId} />\n          ))}\n        </ColumnsScrollableWrap>\n      </ColumnsViewWrap>\n    </Provders>\n  );\n}\nexport default ColumnsView;\n","import firebase from \"firebase\";\nimport Button from \"carbon-react/lib/components/button\";\nimport Profile from \"carbon-react/lib/components/profile\";\n\nimport { useDispatch, useSelector } from \"react-redux\";\nimport styled from \"styled-components\";\nimport {\n  getUserDetails,\n  logOut,\n  getNoSignIn,\n  setNoSignIn,\n} from \"../redux/user/userSlice\";\n\nconst UserDetailsWrap = styled.div`\n  margin: 2rem auto;\n  padding: 0 2rem;\n`;\n\nfunction UserDetails() {\n  const dispatch = useDispatch();\n  const userDetails = useSelector(getUserDetails);\n  const noSignIn = useSelector(getNoSignIn);\n  return (\n    <UserDetailsWrap>\n      {noSignIn ? (\n        <>\n          <Button\n            mt={1}\n            fullWidth\n            buttonType=\"primary\"\n            onClick={() => {\n              console.log('Sign in!');\n              dispatch({ type: setNoSignIn.type, payload: false });\n            }}\n            >Click here to sign in</Button>\n        </>\n      ) : (\n        <>\n          <Profile\n            size=\"ML\"\n            email={userDetails.email}\n            src={userDetails.photoURL}\n            name={userDetails.displayName}\n          />\n          <Button\n            mt={2}\n            size=\"small\"\n            onClick={() => {\n              firebase\n                .auth()\n                .signOut()\n                .then(() => {\n                  dispatch({ type: logOut.type });\n                });\n            }}\n          >\n            Log out\n          </Button>\n        </>\n      )}\n    </UserDetailsWrap>\n  );\n}\nexport default UserDetails;\n","import Button from \"carbon-react/lib/components/button\";\nimport Typography from \"carbon-react/lib/components/typography\";\nimport { useCallback } from \"react\";\nimport { useSelector } from \"react-redux\";\nimport { useHistory } from \"react-router\";\nimport styled from \"styled-components\";\n\nimport { getItems } from \"../redux/dependancies/dependanciesSlice\";\n\nconst ItemActions = styled.div`\n  display: flex;\n  gap: 0.5rem;\n  justify-content: flex-end;\n`;\n\nconst ItemList = styled.ul`\n  max-height: 400px;\n  overflow-y: auto;\n  list-style: none;\n  padding: 0;\n`;\n\nconst Item = styled.li`\n  padding: 0.5rem;\n  border: 1px solid #ccd6db;\n  margin-bottom: 1rem;\n`;\n\nfunction SearchResults({ searchTerm }) {\n  const history = useHistory();\n  const searchSelector = useCallback(\n    (state) => {\n      if (!searchTerm) {\n        return [];\n      }\n      const items = getItems(state);\n      if (!items) {\n        return [];\n      }\n      return Object.keys(items)\n        .map((itemId) => ({\n          ...items[itemId],\n          id: itemId,\n        }))\n        .filter(\n          (item) =>\n            item.title.toLowerCase().includes(searchTerm.toLowerCase()) ||\n            item.description.toLowerCase().includes(searchTerm.toLowerCase())\n        );\n    },\n    [searchTerm]\n  );\n  const results = useSelector((state) => searchSelector(state, searchTerm));\n  return (\n    <div>\n      <ItemList>\n        {results.map((item) => {\n          return (\n            <Item key={item.id} as=\"li\" listStyleType=\"none\" pl={0}>\n              <Typography fontWeight=\"700\" mb={2}>\n                {item.title}\n              </Typography>\n              <ItemActions>\n                <Button\n                  size=\"small\"\n                  onClick={() => {\n                    history.push(`/tree/${item.id}`);\n                  }}\n                >\n                  Tree View\n                </Button>\n              </ItemActions>\n            </Item>\n          );\n        })}\n      </ItemList>\n    </div>\n  );\n}\n\nexport default SearchResults;\n","import { useState } from \"react\";\n\nimport Search from \"carbon-react/lib/__experimental__/components/search\";\nimport SearchResults from \"./SearchResults\";\nimport styled from \"styled-components\";\nimport Typography from \"carbon-react/lib/components/typography\";\n\nconst SearchWrap = styled.form`\n  margin: 2rem 0;\n  padding: 0 2rem;\n`;\n\nconst SearchLabel = styled.label`\n  display: block;\n  margin: 0 0 2rem;\n`;\n\nfunction ComponentSearch() {\n  const [searchTerm, setSearchTerm] = useState(\"\");\n\n  return (\n    <SearchWrap onSubmit={(ev) => ev.preventDefault()}>\n      <SearchLabel>\n        <Typography as=\"div\" fontWeight=\"700\" mb={1}>Search</Typography>\n        <Search\n          id=\"search\"\n          name=\"search\"\n          placeholder=\"\"\n          onChange={(e) => setSearchTerm(e.target.value)}\n          value={searchTerm}\n          searchButton\n        />\n      </SearchLabel>\n      <SearchResults searchTerm={searchTerm} />\n    </SearchWrap>\n  );\n}\n\nexport default ComponentSearch;\n","import Loader from \"carbon-react/lib/components/loader\";\nimport Button from \"carbon-react/lib/components/button\";\nimport { useCallback } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { getSaving, save } from \"../redux/dependancies/dependanciesSlice\";\nimport { getWriteAccess } from \"../redux/user/userSlice\";\n\nfunction SaveButton() {\n  const writeAccess = useSelector(getWriteAccess);\n  const saving = useSelector(getSaving);\n  const dispatch = useDispatch();\n\n  const handleClick = useCallback(\n    (ev) => {\n      ev.preventDefault();\n      if (!saving) {\n        dispatch({ type: save.type });\n      }\n    },\n    [dispatch, saving]\n  );\n\n  if (!writeAccess) {\n    return null;\n  }\n\n  return (\n    <Button fullWidth buttonType=\"primary\" onClick={handleClick}>\n      {saving ? <Loader isInsideButton /> : <>Save</>}\n    </Button>\n  );\n}\n\nexport default SaveButton;\n","import { Route, useHistory } from \"react-router-dom\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport styled from \"styled-components\";\nimport Button from \"carbon-react/lib/components/button\";\n\nimport { addColumn } from \"../redux/dependancies/dependanciesSlice\";\nimport { getReadOnly } from \"../redux/user/userSlice\";\n\nimport UserDetails from \"./UserDetails\";\nimport ComponentSearch from \"./ComponentSearch\";\nimport SaveButton from \"./SaveButton\";\nimport Typography from \"carbon-react/lib/components/typography\";\n\nconst SidebarWrap = styled.div`\n  width: 320px;\n  flex: 0 0 320px;\n  background: rgb(242, 245, 246);\n  position: relative;\n  z-index: 2;\n`;\n\nconst SidebarActions = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  padding: 0 2rem;\n  gap: 1rem;\n`;\n\nconst Hr = styled.hr`\n  margin: 2rem 0;\n  border-bottom: 1px solid rgba(0, 0, 0, 0.1);\n`;\n\nfunction AppSidebar() {\n  const history = useHistory();\n  const dispatch = useDispatch();\n  const readonly = useSelector(getReadOnly);\n  return (\n    <SidebarWrap>\n\n      <Typography ml={4} mt={3} variant=\"h1\">Dependancy Graph</Typography>\n\n      <UserDetails />\n      <Hr />\n\n      <ComponentSearch />\n\n      <Hr />\n\n      <SidebarActions>\n        <Route path=\"/tree/\">\n          <Button fullWidth onClick={() => history.push(\"/\")}>\n            Columns View\n          </Button>\n          <Button fullWidth onClick={() => history.goBack()}>\n            Back\n          </Button>\n        </Route>\n        <Route exact path=\"/\">\n          {!readonly && (\n            <Button\n              onClick={() => {\n                dispatch({ type: addColumn.toString() });\n              }}\n              fullWidth\n              iconType=\"plus\"\n            >\n              Add New Column\n            </Button>\n          )}\n        </Route>\n        <SaveButton />\n      </SidebarActions>\n    </SidebarWrap>\n  );\n}\n\nexport default AppSidebar;\n","import \"./App.css\";\r\nimport { HashRouter as Router, Switch, Route } from \"react-router-dom\";\r\n\r\n// import LoadData from \"./components/LoadData\";\r\nimport Guard from \"./components/Guard\";\r\nimport FirebaseSync from \"./components/FirebaseSync\";\r\nimport TreeView from \"./features/Tree/TreeView\";\r\nimport ColumnsView from \"./features/Columns/ColumnsView\";\r\n\r\nimport AppSidebar from \"./components/AppSidebar\";\r\n\r\nimport styled from \"styled-components\";\r\n\r\nconst AppWrap = styled.div`\r\n  display: flex;\r\n  min-height: 100vh;\r\n  width: 100%;\r\n  max-width: 100vw;\r\n  align-items: stretch;\r\n`;\r\n\r\nconst Wrap = styled.div`\r\n  flex: 0 1 calc(100% - 320px);\r\n  max-width: calc(100% - 320px);\r\n  position: relative;\r\n  z-index: 1;\r\n`;\r\n\r\nfunction App() {\r\n  return (\r\n    <AppWrap>\r\n      <Guard>\r\n        {/* <LoadData /> */}\r\n        <FirebaseSync />\r\n        <Router>\r\n          <AppSidebar />\r\n\r\n          <Wrap>\r\n            <Switch>\r\n              <Route path=\"/tree/:itemId\" component={TreeView} />\r\n              <Route path=\"/\" component={ColumnsView} />\r\n            </Switch>\r\n          </Wrap>\r\n        </Router>\r\n      </Guard>\r\n    </AppWrap>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import { configureStore } from \"@reduxjs/toolkit\";\r\n\r\nimport dependanciesReducer from \"./dependancies/dependanciesSlice\";\r\nimport connectionsReducer from \"./connections/connectionsSlice\";\r\nimport linkingReducer from \"./linking/linkingSlice\";\r\nimport optionsReducer from \"./options/optionsSlice\";\r\nimport userReducer from \"./user/userSlice\";\r\n\r\nexport default configureStore({\r\n  reducer: {\r\n    linking: linkingReducer,\r\n    dependancies: dependanciesReducer,\r\n    connections: connectionsReducer,\r\n    options: optionsReducer,\r\n    user: userReducer\r\n  },\r\n});\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' },\r\n  })\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","/* Add your config from the Firebase Console */\nconst firebaseConfig = {\n  apiKey: \"AIzaSyAESY7RU998b2rdyyWMhCkt4mfQXfEdpyM\",\n  authDomain: \"dependancy-graph.firebaseapp.com\",\n  projectId: \"dependancy-graph\",\n  storageBucket: \"dependancy-graph.appspot.com\",\n  messagingSenderId: \"257602314188\",\n  appId: \"1:257602314188:web:b6daa829c5e07f23648769\",\n};\nexport default firebaseConfig;\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport \"./index.css\";\r\nimport App from \"./App\";\r\nimport store from \"./redux/store\";\r\nimport { Provider } from \"react-redux\";\r\nimport * as serviceWorker from \"./serviceWorker\";\r\n\r\nimport GlobalStyle from \"carbon-react/lib/style/global-style\";\r\n\r\nimport \"firebase/firestore\";\r\nimport { FirebaseAppProvider } from \"reactfire\";\r\n\r\nimport firebaseConfig from \"./firebaseConfig\";\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <GlobalStyle />\r\n    <FirebaseAppProvider firebaseConfig={firebaseConfig}>\r\n      <Provider store={store}>\r\n        <App />\r\n      </Provider>\r\n    </FirebaseAppProvider>\r\n  </React.StrictMode>,\r\n  document.getElementById(\"root\")\r\n);\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}