{"version":3,"sources":["redux/dependancies/dependanciesSlice.js","components/LoadData.js","features/Tree/TreeContext.js","hooks/useViewport.js","features/Tree/DraggableGroup.js","redux/options/optionsSlice.js","features/Tree/TreeNode.js","features/Tree/TreeArrows.js","features/Tree/TreeContents.js","features/Tree/TreeView.js","context/clickAndDrag.js","context/refs.js","redux/connections/connectionsSlice.js","features/Columns/Connections.js","redux/settings/settingsSlice.js","redux/linking/linkingSlice.js","data/statuses.js","features/Columns/NodeEditor.js","features/Columns/ColumnItem.js","features/Columns/Column.js","features/Columns/ColumnsView.js","components/SearchResults.js","components/ComponentSearch.js","components/SaveButton.js","components/AppSidebar.js","App.js","redux/user/userSlice.js","redux/store.js","serviceWorker.js","firebaseConfig.js","index.js"],"names":["genId","prefix","Math","random","toString","substr","dependanciesSlice","createSlice","name","initialState","saving","shouldLoad","items","connections","columns","reducers","addItem","state","action","column","payload","id","partial","title","description","status","genItem","unshift","removeItem","Object","keys","find","col","findIndex","item","filter","thisItem","from","to","updateItem","update","moveItem","newPos","startPos","splice","addColumn","removeColumn","updateColumn","addConnection","existing","conn","push","removeConnection","updateAll","save","saved","actions","getItems","dependancies","getColumns","getConnections","getShouldSave","getSaving","loadData","a","fetch","then","res","json","saveData","console","error","LoadData","dispatch","useDispatch","useSelector","shouldSave","useEffect","data","type","load","finally","TreeContext","createContext","TreeContextProvider","children","itemId","useParams","nodesToShow","rel","forEach","connection","colKeys","rowLength","columnsLength","colKey","index","rowCount","nodeToShowIndex","node","row","max","nodes","map","descendants","length","ancesstors","position","x","FRAME_WIDTH","y","active","Provider","value","maxColumns","useViewport","useState","width","window","innerWidth","height","innerHeight","viewport","setViewport","handleWindowResize","addEventListener","removeEventListener","reducer","start","mouseDown","prev","transform","DraggableGroup","useReducer","dragging","useContext","outerTransform","useMemo","eventHandler","document","fill","onMouseDown","ev","clientX","clientY","onMouseMove","onMouseUp","style","userSelect","optionsSlice","showOtherRelations","showAllArrows","setOption","key","getShowOtherRelations","options","NodeTitle","styled","text","NodeDescription","NodeColumn","NodeBox","rect","props","root","OtherNodeLabel","parentX","parentY","line","d","strokeWidth","stroke","cx","cy","r","textAnchor","dominantBaseline","TreeNode","selected","itemDetails","descendantsLabel","ancesstorsLabel","onClick","TreeArrowsG","g","TreeArrows","activePosition","xStart","yStart","xEnd","yEnd","triangle","points","TreeContents","history","useHistory","switchItem","useCallback","TreeViewWrap","div","TreeViewSVG","svg","TreeView","viewbox","svgProps","setSvgProps","preserveAspectRatio","xmlns","ClickAndDrag","ClickAndDragProvider","setState","drag","drop","linking","Refs","ref","newState","RefsProvider","addRef","removeRef","refs","connectionsSlice","scrollLeft","updateScrollLeft","getScrollLeft","ConnectionsWrap","Svg","Connections","refsContext","viewBox","useRef","lines","scrollTop","documentElement","fromRef","toRef","fromClientRect","getBoundingClientRect","right","top","toClientRect","abs","left","err","log","current","settingsSlice","readonly","process","getReadOnly","settings","linkingSlice","source","startLinking","doneLinking","getLinkingSource","getIsLinking","statuses","unknown","color","stable","underReview","unstable","outdated","deprecated","ItemButtons","Circle","span","NodeEditor","doneEditing","confirmDelete","setConfirmDelete","val","onSubmit","preventDefault","labelInline","label","size","onChange","target","required","buttonType","open","onConfirm","requestAnimationFrame","onCancel","ColumnItemEle","ReadOnlyView","ColumnItem","edittable","setEdittable","linkingSource","startEditing","querySelector","focus","viewTree","addLink","startLinkingFromNode","exitlinking","orientation","pixelWidth","cursor","fontSize","variant","mb","borderColor","disabled","ColumnEle","ColumnVerticalList","justify","ColumnTitle","ColumnTitleText","h2","ColumnTitleEditable","input","EditableWrap","EditableIcon","Column","colId","titleInput","onAction","bgTheme","bgSize","ColumnsViewWrap","ColumnsScrollableWrap","Provders","ColumnsView","scrollable","handleScroll","onScroll","ItemActions","ItemList","ul","Item","li","SearchResults","searchTerm","searchSelector","toLowerCase","includes","results","as","listStyleType","pl","fontWeight","SearchWrap","form","SearchLabel","ComponentSearch","setSearchTerm","placeholder","e","searchButton","SaveButton","handleClick","fullWidth","SidebarWrap","SidebarActions","Hr","hr","AppSidebar","path","goBack","exact","iconType","AppWrap","Wrap","App","component","userSlice","userDetails","uid","email","photoURL","signedIn","writeAccess","setUser","user","configureStore","linkingReducer","dependanciesReducer","connectionsReducer","optionsReducer","userReducer","settingsReducer","Boolean","location","hostname","match","firebaseConfig","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","ReactDOM","render","StrictMode","store","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.04c8b678.chunk.js","sourcesContent":["import { createSlice } from \"@reduxjs/toolkit\";\n\nconst genId = (prefix = \"item\") =>\n  `${prefix}-${Math.random()\n    .toString()\n    .substr(2, 8)}${Math.random().toString().substr(2, 8)}`;\n\nconst genItem = (partial = {}) => ({\n  title: \"Name\",\n  description: \"\",\n  status: \"unknown\",\n  ...partial,\n});\n\nexport const dependanciesSlice = createSlice({\n  name: \"dependancies\",\n  initialState: {\n    saving: false,\n    shouldLoad: true,\n    items: {},\n    connections: [],\n    columns: {},\n  },\n  reducers: {\n    addItem: (state, action) => {\n      const { column } = action.payload;\n      const id = genId();\n      state.items[id] = genItem();\n      state.columns[column].items.unshift(id);\n\n      return state;\n    },\n    removeItem: (state, action) => {\n      const { id } = action.payload;\n\n      // Delete the item\n      delete state.items[id];\n\n      // Get the correct column to remove it from\n      const column = Object.keys(state.columns).find((col) => {\n        return state.columns[col]?.items?.findIndex((item) => item === id) > -1;\n      });\n\n      if (column) {\n        // Filter it from the column\n        state.columns[column].items = state.columns[column].items.filter(\n          (thisItem) => thisItem !== id\n        );\n      }\n\n      state.connections = state.connections.filter(\n        ({ from, to }) => from !== id && to !== id\n      );\n\n      return state;\n    },\n    updateItem: (state, action) => {\n      const { id, update } = action.payload;\n      state.items[id] = {\n        ...state.items[id],\n        ...update,\n      };\n    },\n    moveItem: (state, action) => {\n      const { id, newPos, from, to } = action.payload;\n      const startPos = state.columns[from].items.findIndex(id);\n\n      // If from and to are the same then this will still work, so no case needs to be added\n\n      // Remove from original array:\n      state.columns[from].items.splice(startPos, 1);\n\n      // Add to target array\n      state.columns[to].items.splice(newPos, 0, id);\n\n      return state;\n    },\n    addColumn: (state) => {\n      const id = genId(\"column-\");\n\n      state.columns[id] = {\n        title: \"Column title\",\n        items: [],\n      };\n    },\n    removeColumn: (state, action) => {\n      const { id } = action.payload;\n      delete state.columns[id];\n    },\n    updateColumn: (state, action) => {\n      const { id, ...update } = action.payload;\n\n      return {\n        ...state,\n        columns: {\n          ...state.columns,\n          [id]: {\n            ...state.columns[id],\n            ...update,\n          },\n        },\n      };\n    },\n    addConnection: (state, action) => {\n      const { to, from } = action.payload;\n      const existing = state.connections.findIndex(\n        (conn) => conn.to === to && conn.from === from\n      );\n      if (existing > -1) {\n        state.connections.splice(existing, 1);\n      } else {\n        state.connections.push({ to, from });\n      }\n    },\n    removeConnection: (state, action) => {\n      const { to, from } = action.payload;\n      state.connections = state.connections.filter(\n        (item) => item.to === to && item.from === from\n      );\n    },\n    updateAll: (state, action) => {\n      const { items, columns, connections } = action.payload;\n\n      state.items = items;\n      state.columns = columns;\n      state.connections = connections;\n      state.shouldLoad = false;\n    },\n    save: (state) => {\n      state.saving = true;\n    },\n    saved: (state) => {\n      state.saving = false;\n    },\n  },\n});\n\nexport const {\n  addItem,\n  removeItem,\n  updateItem,\n  moveItem,\n  addColumn,\n  updateColumn,\n  addConnection,\n  updateAll,\n  save,\n  saved,\n} = dependanciesSlice.actions;\n\nexport const getItems = (state) => state?.dependancies?.items;\nexport const getColumns = (state) => state?.dependancies?.columns;\nexport const getConnections = (state) => state?.dependancies?.connections;\nexport const getShouldLoad = (state) => state?.dependancies?.shouldLoad;\nexport const getShouldSave = (state) => state?.dependancies?.saving;\nexport const getSaving = (state) => state?.dependancies?.saving;\n\nexport default dependanciesSlice.reducer;\n","import { useEffect } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport {\n  getConnections,\n  getColumns,\n  getItems,\n  getShouldSave,\n  updateAll,\n  saved,\n} from \"../redux/dependancies/dependanciesSlice\";\n\nconst URL = \"http://localhost:3002\";\n\nconst loadData =\n  process.env.NODE_ENV === \"development\"\n    ? async () => {\n        const data = await Promise.all([\n          fetch(URL + \"/items\").then((res) => res.json()),\n          fetch(URL + \"/columns\").then((res) => res.json()),\n          fetch(URL + \"/connections\")\n            .then((res) => res.json())\n            .then((connections) =>\n              Object.keys(connections).map((key) => connections[key])\n            ),\n        ]);\n\n        return {\n          items: data[0],\n          columns: data[1],\n          connections: data[2],\n        };\n      }\n    : async () => {\n        return await fetch(\"./data.json\").then((res) => res.json());\n      };\n\nconst saveData =\n  process.env.NODE_ENV === \"development\"\n    ? async (items, connections, columns) => {\n        await Promise.all([\n          fetch(URL + \"/items\", {\n            method: \"POST\",\n            headers: {\n              \"Content-Type\": \"application/json\",\n            },\n            body: JSON.stringify(items),\n          }),\n          fetch(URL + \"/columns\", {\n            method: \"POST\",\n            headers: {\n              \"Content-Type\": \"application/json\",\n            },\n            body: JSON.stringify(columns),\n          }),\n          fetch(URL + \"/connections\", {\n            method: \"POST\",\n            headers: {\n              \"Content-Type\": \"application/json\",\n            },\n            body: JSON.stringify(\n              Object.fromEntries(connections.map((connection, index) => [index, connection]))\n            ),\n          }),\n        ]);\n      }\n    : async () => {\n        console.error(\"Can't save in prod!\");\n      };\n\nfunction LoadData() {\n  const dispatch = useDispatch();\n\n  const items = useSelector(getItems);\n  const connections = useSelector(getConnections);\n  const columns = useSelector(getColumns);\n  const shouldSave = useSelector(getShouldSave);\n\n  useEffect(() => {\n    const load = async () => {\n      const data = await loadData();\n      dispatch({ type: updateAll.type, payload: data });\n    };\n    load();\n  }, [dispatch]);\n\n  useEffect(() => {\n    if (!shouldSave) {\n      return;\n    }\n\n    const save = async () => {\n      await saveData(items, connections, columns);\n    };\n\n    save().finally(() => {\n      dispatch({ type: saved.type });\n    });\n  }, [dispatch, shouldSave, items, connections, columns]);\n\n  return null;\n}\n\nexport default LoadData;\n","import { useParams } from \"react-router-dom\";\nimport { createContext } from \"react\";\nimport { useSelector } from \"react-redux\";\nimport {\n  getColumns,\n  getConnections,\n} from \"../../redux/dependancies/dependanciesSlice\";\n\nconst FRAME_WIDTH = 2000;\n// const FRAME_HEIGHT = 2000;\n\nexport const TreeContext = createContext();\n\nexport function TreeContextProvider({ children }) {\n  const { itemId } = useParams();\n  const connections = useSelector(getConnections);\n  const columns = useSelector(getColumns);\n\n  let nodesToShow = [\n    {\n      rel: \"root\",\n      id: itemId,\n    },\n  ];\n\n  // Add all descendents and ancesstors\n  connections.forEach((connection) => {\n    if (connection.from === itemId) {\n      nodesToShow.push({\n        rel: \"descendant\",\n        id: connection.to,\n      });\n    }\n    if (connection.to === itemId) {\n      nodesToShow.push({\n        rel: \"ancesstor\",\n        id: connection.from,\n      });\n    }\n  });\n\n  // Assign the row and position in row\n  const colKeys = Object.keys(columns);\n\n  const rowLength = [];\n\n  let columnsLength = 0;\n\n  colKeys.forEach((colKey, index) => {\n    let rowCount = 0;\n    columns[colKey].items.forEach((item) => {\n      const nodeToShowIndex = nodesToShow.findIndex((node) => node.id === item);\n      if (nodeToShowIndex < 0) {\n        return;\n      }\n      nodesToShow[nodeToShowIndex].row = index;\n      nodesToShow[nodeToShowIndex].rowCount = rowCount++;\n      nodesToShow[nodeToShowIndex].col = columns[colKey].title;\n    });\n\n    rowLength[index] = rowCount;\n    columnsLength = Math.max(rowCount, columnsLength);\n  });\n\n  const nodes = nodesToShow.map((node) => {\n    return {\n      id: node.id,\n      rel: node.rel,\n      col: node.col,\n      descendants: connections.filter(({ from }) => from === node.id).length,\n      ancesstors: connections.filter(({ to }) => to === node.id).length,\n      position: {\n        x: FRAME_WIDTH / 2 + (rowLength[node.row] / 2 - node.rowCount) * 500,\n        y: node.row * 300,\n      },\n    };\n  });\n\n  const active = nodes.findIndex((node) => node.id === itemId);\n\n  return (\n    <TreeContext.Provider value={{ nodes, maxColumns: columnsLength, active }}>\n      {children}\n    </TreeContext.Provider>\n  );\n}\n","import { useEffect, useState } from \"react\";\n\nconst useViewport = () => {\n  const [viewport, setViewport] = useState({\n    width: window.innerWidth,\n    height: window.innerHeight,\n  });\n\n  useEffect(() => {\n    const handleWindowResize = () => {\n      setViewport({\n        width: window.innerWidth,\n        height: window.innerHeight,\n      });\n    };\n    window.addEventListener(\"resize\", handleWindowResize);\n    return () => window.removeEventListener(\"resize\", handleWindowResize);\n  }, []);\n\n  // Return the width so we can use it in our components\n  return viewport;\n};\n\nexport default useViewport;\n","import { useEffect, useContext, useMemo, useReducer } from \"react\";\nimport { TreeContext } from \"./TreeContext\";\nimport useViewport from \"../../hooks/useViewport\";\n\nfunction reducer(state, { type, payload }) {\n  switch (type) {\n    case \"MOUSE_DOWN\":\n      return {\n        ...state,\n        start: {\n          x: payload.x,\n          y: payload.y,\n        },\n        mouseDown: true,\n      };\n    case \"MOUSE_UP\":\n      return {\n        ...state,\n        mouseDown: false,\n        prev: { ...state.transform },\n      };\n    case \"MOVE\":\n      if (!state.mouseDown) {\n        return state;\n      }\n      const { start, prev } = state;\n      return {\n        ...state,\n        transform: {\n          x: prev.x - (start.x - payload.x),\n          y: prev.y - (start.y - payload.y),\n        },\n      };\n\n    default: {\n      return state;\n    }\n  }\n}\n\nfunction DraggableGroup({ children }) {\n  const [dragging, dispatch] = useReducer(reducer, {\n    transform: {\n      x: 0,\n      y: 0,\n    },\n    start: {\n      x: 0,\n      y: 0,\n    },\n    prev: {\n      x: 0,\n      y: 0,\n    },\n    mouseDown: false,\n  });\n\n  const { nodes, active } = useContext(TreeContext);\n\n  const viewport = useViewport();\n\n  const outerTransform = useMemo(() => {\n    const x = viewport.width / 2 - nodes[active].position.x - 150;\n    const y = viewport.height / 2 - nodes[active].position.y - 40;\n    return {\n      x,\n      y,\n    };\n  }, [viewport, nodes, active]);\n\n  useEffect(() => {\n    const eventHandler = () => {\n      dispatch({ type: \"MOUSE_UP\" });\n    };\n    document.addEventListener(\"mouseleave\", eventHandler);\n    return () => {\n      document.removeEventListener(\"mouseleave\", eventHandler);\n    };\n  }, [dispatch]);\n\n  return (\n    <>\n      <rect\n        fill=\"transparent\"\n        width=\"2000\"\n        height=\"2000\"\n        onMouseDown={(ev) => {\n          dispatch({\n            type: \"MOUSE_DOWN\",\n            payload: { x: ev.clientX, y: ev.clientY },\n          });\n        }}\n        onMouseMove={(ev) => {\n          dispatch({\n            type: \"MOVE\",\n            payload: {\n              x: ev.clientX,\n              y: ev.clientY,\n            },\n          });\n        }}\n        onMouseUp={(ev) => {\n          dispatch({ type: \"MOUSE_UP\" });\n        }}\n      ></rect>\n      <g\n        transform={`translate(${outerTransform.x} ${outerTransform.y})`}\n        style={{ userSelect: \"none\" }}\n      >\n        <g\n          transform={`translate(${dragging.transform.x} ${dragging.transform.y})`}\n        >\n          {children}\n        </g>\n      </g>\n    </>\n  );\n}\nexport default DraggableGroup;\n","import { createSlice } from \"@reduxjs/toolkit\";\n\nexport const optionsSlice = createSlice({\n  name: \"options\",\n  initialState: {\n    showOtherRelations: false,\n    showAllArrows: true,\n  },\n  reducers: {\n    setOption: (state, action) => {\n      const { key, value } = action.payload;\n      state[key] = value;\n    },\n  },\n});\n\nexport const { setOption } = optionsSlice.actions;\n\nexport const getShowOtherRelations = (state) =>\n  state?.options?.showOtherRelations;\n\nexport default optionsSlice.reducer;\n","import { useSelector } from \"react-redux\";\nimport styled from \"styled-components\";\nimport { getShowOtherRelations } from \"../../redux/options/optionsSlice\";\n\nconst NodeTitle = styled.text`\n  font: normal 18px sans-serif;\n  pointer-events: none;\n`;\n\nconst NodeDescription = styled.text`\n  font: normal 14px sans-serif;\n  pointer-events: none;\n`;\n\nconst NodeColumn = styled.text`\n  font: normal 14px sans-serif;\n  pointer-events: none;\n`;\n\nconst NodeBox = styled.rect`\n  fill: #fff;\n  stroke: #8099a4;\n  stroke-width: 1;\n  filter: \n    drop-shadow(0 3px 3px rgba(0,20,29,0.2)) \n    drop-shadow(0 2px 4px rgba(0,20,29,0.15));\n  ${(props) =>\n    props.root\n      ? `\n      stroke-width: 2;\n      fill: rgb(242, 245, 246);\n      `\n      : `\n      &:hover {\n        stroke-width: 2;\n        stroke: #008200;\n        cursor: pointer;\n      }\n    `}}\n`;\n\nconst OtherNodeLabel = ({ x, y, parentX, parentY, text }) => {\n  const line = `M ${parentX} ${parentY}, L ${x} ${y}`;\n  return (\n    <g>\n      <path\n        d={line}\n        strokeWidth=\"2\"\n        fill=\"transparent\"\n        stroke=\"rgba(0, 0, 0, 0.4)\"\n      />\n      <circle\n        cx={x}\n        cy={y}\n        r=\"16\"\n        fill=\"#ffffff\"\n        stroke=\"#8099a4\"\n        strokeWidth=\"1\"\n      />\n      <text x={x} y={y} textAnchor=\"middle\" dominantBaseline=\"central\">\n        {text}\n      </text>\n    </g>\n  );\n};\n\nfunction TreeNode({\n  selected,\n  itemDetails,\n  position = { x: 0, y: 0 },\n  rel,\n  descendants,\n  ancesstors,\n  col,\n}) {\n  const showOtherRelations = useSelector(getShowOtherRelations);\n\n  let descendantsLabel = \"\";\n  let ancesstorsLabel = \"\";\n\n  if (rel === \"ancesstor\") {\n    descendantsLabel = descendants - 1 > 0 ? `+${descendants - 1}` : \"\";\n    ancesstorsLabel = ancesstors;\n  }\n\n  if (rel === \"descendant\") {\n    descendantsLabel = descendants;\n    ancesstorsLabel = ancesstors - 1 > 0 ? `+${ancesstors - 1}` : \"\";\n  }\n\n  return (\n    <>\n      <g onClick={selected}>\n        <NodeBox\n          root={rel === \"root\"}\n          x={position.x.toString()}\n          y={position.y.toString()}\n          height=\"80\"\n          width=\"300\"\n        />\n\n        <NodeTitle\n          x={(position.x + 10).toString()}\n          y={(position.y + 30).toString()}\n        >\n          {itemDetails?.title}\n        </NodeTitle>\n\n        <NodeColumn\n          x={(position.x + 10).toString()}\n          y={(position.y + 60).toString()}\n        >\n          {col}\n        </NodeColumn>\n\n        <NodeDescription\n          x={(position.x + 10).toString()}\n          y={(position.y + 60).toString()}\n        >\n          {col}\n          {itemDetails?.description}\n        </NodeDescription>\n      </g>\n\n      {showOtherRelations && (\n        <>\n          {descendantsLabel > 0 && (\n            <OtherNodeLabel\n              x={(position.x + 240).toString()}\n              y={(position.y + 80 + 40).toString()}\n              parentX={position.x + 240}\n              parentY={position.y + 80}\n              text={descendantsLabel}\n            />\n          )}\n\n          {ancesstorsLabel > 0 && (\n            <OtherNodeLabel\n              x={(position.x + 240).toString()}\n              y={(position.y - 40).toString()}\n              parentX={position.x + 240}\n              parentY={position.y}\n              text={ancesstorsLabel}\n            />\n          )}\n        </>\n      )}\n    </>\n  );\n}\nexport default TreeNode;\n","import { useMemo } from \"react\";\nimport styled from \"styled-components\";\n\nconst TreeArrowsG = styled.g`\n  pointer-events: none;\n`;\n\nfunction TreeArrows({\n  activePosition = { x: 0, y: 0 },\n  position = { x: 0, y: 0 },\n  rel,\n}) {\n  const [line, triangle] = useMemo(() => {\n    if (activePosition.y > position.y) {\n      const xStart = position.x + 150;\n      const yStart = position.y + 80;\n\n      const xEnd = activePosition.x + 150;\n      const yEnd = activePosition.y;\n\n      return [\n        ` M ${xStart} ${yStart},\n            C ${xStart} ${yStart + 100},\n            ${xEnd} ${yEnd - 100},\n            ${xEnd} ${yEnd - 10}\n            L ${xEnd} ${yEnd}`,\n        `${xEnd},${yEnd} ${xEnd - 5},${yEnd - 10} ${xEnd + 5},${yEnd - 10}`,\n      ];\n    } else if (activePosition.y < position.y) {\n      const xStart = activePosition.x + 150;\n      const yStart = activePosition.y + 80;\n\n      const xEnd = position.x + 150;\n      const yEnd = position.y;\n\n      return [\n        ` M ${xStart} ${yStart},\n              C ${xStart} ${yStart + 100},\n              ${xEnd} ${yEnd - 100},\n              ${xEnd} ${yEnd - 10}\n              L ${xEnd} ${yEnd}`,\n        `${xEnd},${yEnd} ${xEnd - 5},${yEnd - 10} ${xEnd + 5},${yEnd - 10}`,\n      ];\n    } else if (rel === \"ancesstor\") {\n      const xStart = position.x + 150;\n      const yStart = position.y;\n\n      const xEnd = activePosition.x + 150;\n      const yEnd = activePosition.y;\n\n      return [\n        ` M ${xStart} ${yStart},\n              C ${xStart} ${yStart - 80},\n              ${xEnd} ${yEnd - 80},\n              ${xEnd} ${yEnd - 10}\n              L ${xEnd} ${yEnd}`,\n        `${xEnd},${yEnd} ${xEnd - 5},${yEnd - 10} ${xEnd + 5},${yEnd - 10}`,\n      ];\n\n      // return [{ x: 0, y: 0 }, ``, ``];\n    } else {\n      const xStart = activePosition.x + 150;\n      const yStart = activePosition.y + 80;\n\n      const xEnd = position.x + 150;\n      const yEnd = position.y + 80;\n\n      return [\n        ` M ${xStart} ${yStart},\n              C ${xStart} ${yStart + 80},\n              ${xEnd} ${yEnd + 80},\n              ${xEnd} ${yEnd + 10}\n              L ${xEnd} ${yEnd}`,\n        `${xEnd},${yEnd} ${xEnd - 5},${yEnd + 10} ${xEnd + 5},${yEnd + 10}`,\n      ];\n    }\n  }, [position, activePosition, rel]);\n\n  return (\n    <TreeArrowsG>\n      <path\n        d={line}\n        strokeWidth=\"2\"\n        fill=\"transparent\"\n        stroke=\"rgba(0, 0, 0, 0.4)\"\n      ></path>\n      <polygon points={triangle} fill=\"black\" />\n    </TreeArrowsG>\n  );\n}\n\nexport default TreeArrows;\n","import TreeNode from \"./TreeNode\";\nimport { useCallback, useContext, useMemo } from \"react\";\nimport { TreeContext } from \"./TreeContext\";\nimport { useSelector } from \"react-redux\";\nimport { getItems } from \"../../redux/dependancies/dependanciesSlice\";\nimport TreeArrows from \"./TreeArrows\";\nimport { useHistory } from \"react-router\";\n\nfunction TreeContents() {\n  const { nodes, active } = useContext(TreeContext);\n  const items = useSelector(getItems);\n  const history = useHistory();\n\n  const activePosition = useMemo(() => {\n    return nodes[active].position;\n  }, [nodes, active]);\n\n  const switchItem = useCallback(\n    (id) => {\n      history.push(`/tree/${id}`);\n    },\n    [history]\n  );\n\n  return (\n    <>\n      {nodes && (\n        <>\n          {nodes.map((node, index) => {\n            if (node.rel === \"root\") {\n              return null;\n            }\n            return (\n              <TreeArrows\n                key={index}\n                rel={node.rel}\n                position={node.position}\n                activePosition={activePosition}\n              />\n            );\n          })}\n          {nodes.map((node, index) => (\n            <TreeNode\n              selected={() => {\n                switchItem(node.id);\n              }}\n              key={index}\n              itemDetails={items[node.id]}\n              {...node}\n            />\n          ))}\n        </>\n      )}\n    </>\n  );\n}\n\nexport default TreeContents;\n","import { useEffect, useState } from \"react\";\nimport DraggableGroup from \"./DraggableGroup\";\nimport styled from \"styled-components\";\n\nimport useViewport from \"../../hooks/useViewport\";\n\nimport TreeContents from \"./TreeContents\";\nimport { TreeContextProvider } from \"./TreeContext\";\n\nconst TreeViewWrap = styled.div`\n  width: calc(100vw - 320px);\n  height: 100vh;\n  position: relative;\n`;\n\nconst TreeViewSVG = styled.svg`\n  position: absolute;\n  left: 0;\n  top: 0;\n`;\n\nfunction TreeView() {\n  const viewport = useViewport();\n  const [svgProps, setSvgProps] = useState({\n    height: 300,\n    width: 600,\n    viewbox: `0 0 600 300`,\n  });\n\n  useEffect(() => {\n    const { width, height } = viewport;\n    setSvgProps({\n      width: width - 320,\n      height,\n      viewbox: `0 0 ${width - 320} ${height}`,\n    });\n  }, [viewport, setSvgProps]);\n\n  return (\n    <TreeViewWrap>\n      <TreeContextProvider>\n        <TreeViewSVG\n          preserveAspectRatio=\"none\"\n          xmlns=\"http://www.w3.org/2000/svg\"\n          {...svgProps}\n        >\n          <DraggableGroup>\n            <TreeContents />\n          </DraggableGroup>\n        </TreeViewSVG>\n      </TreeContextProvider>\n    </TreeViewWrap>\n  );\n}\nexport default TreeView;\n","import { createContext, useState, useCallback } from \"react\";\n\nexport const ClickAndDrag = createContext();\n\nexport const ClickAndDragProvider = ({ children }) => {\n  const [state, setState] = useState(false);\n\n  const drag = useCallback(() => {\n    setState(true);\n  }, [setState]);\n\n  const drop = useCallback(() => {\n    setState(false);\n  }, [setState]);\n\n  return (\n    <ClickAndDrag.Provider\n      value={{\n        linking: state,\n        drag,\n        drop,\n      }}\n    >\n      {children}\n    </ClickAndDrag.Provider>\n  );\n};\n","import { createContext, useCallback, useReducer } from \"react\";\n\nexport const Refs = createContext({});\n\nfunction reducer(state, { type, payload }) {\n  switch (type) {\n    case \"ADD\": {\n      const { id, ref } = payload;\n      return {\n        ...state,\n        [id]: ref,\n      };\n    }\n    case \"REMOVE\": {\n      const { id } = payload;\n      const newState = { ...state };\n      delete newState[id];\n      return newState;\n    }\n    default:\n      return state;\n  }\n}\n\nexport const RefsProvider = ({ children }) => {\n  const [state, dispatch] = useReducer(reducer, {});\n\n  const addRef = useCallback(\n    (id, ref) => {\n      dispatch({ type: \"ADD\", payload: { id, ref } });\n    },\n    [dispatch]\n  );\n\n  const removeRef = useCallback(\n    (id) => {\n      dispatch({ type: \"REMOVE\", payload: { id } });\n    },\n    [dispatch]\n  );\n\n  return (\n    <Refs.Provider\n      value={{\n        refs: state,\n        addRef,\n        removeRef,\n      }}\n    >\n      {children}\n    </Refs.Provider>\n  );\n};\n","import { createSlice } from \"@reduxjs/toolkit\";\n\nexport const connectionsSlice = createSlice({\n  name: \"connections\",\n  initialState: {\n    scrollLeft: 0,\n  },\n  reducers: {\n    updateScrollLeft: (state, action) => {\n      const { value } = action.payload;\n      state.scrollLeft = value;\n    },\n  },\n});\n\nexport const {\n    updateScrollLeft,\n} = connectionsSlice.actions;\n\nexport const getScrollLeft = (state) => state?.connections?.scrollLeft;\n\nexport default connectionsSlice.reducer;\n","import { useMemo, useContext, useEffect, useRef, useState } from \"react\";\nimport { Refs } from \"../../context/refs\";\n\nimport useViewport from \"../../hooks/useViewport\";\n\nimport { useSelector } from \"react-redux\";\nimport { getConnections } from \"../../redux/dependancies/dependanciesSlice\";\nimport styled from \"styled-components\";\nimport { getScrollLeft } from \"../../redux/connections/connectionsSlice\";\n\nconst ConnectionsWrap = styled.div`\n  pointer-events: none;\n  position: absolute;\n  bottom: 0;\n  right: 0;\n  left: 0;\n  top: 0;\n`;\n\nconst Svg = styled.svg`\n  width: 100%;\n  height: 100%;\n  display: block;\n`;\n\nfunction Connections() {\n  const connections = useSelector(getConnections);\n  const scrollLeft = useSelector(getScrollLeft);\n\n  const refsContext = useContext(Refs);\n\n  const [svgProps, setSvgProps] = useState({\n    width: 100,\n    height: 100,\n    viewBox: `0 0 100 100`,\n  });\n\n  const viewport = useViewport();\n\n  const ref = useRef(null);\n\n  const lines = useMemo(() => {\n    const { scrollTop } = document.documentElement;\n\n    return connections\n      ?.map(({ from, to }) => {\n        try {\n          const fromRef = refsContext.refs[from];\n          const toRef = refsContext.refs[to];\n\n          const fromClientRect = fromRef.getBoundingClientRect();\n          const xStart = fromClientRect.right - 320;\n          const yStart =\n            fromClientRect.top + scrollTop + fromClientRect.height / 2;\n\n          const toClientRect = toRef.getBoundingClientRect();\n          let xEnd = toClientRect.right - 320;\n          let yEnd = toClientRect.top + scrollTop + toClientRect.height / 2;\n\n          if (xStart === xEnd || Math.abs(xStart - xEnd) < 1) {\n            // modifier is negative if to is below from\n            const modifier = yStart > yEnd ? 1 : -1;\n            yEnd = yEnd + (modifier * toClientRect.height) / 4;\n\n            return {\n              line: `M ${xStart} ${yStart} \n          C ${xStart + 40} ${yStart}, \n            ${xEnd + 40} ${yEnd}, \n            ${xEnd} ${yEnd}`,\n              start: { x: xStart, y: yStart },\n            };\n          } else {\n            xEnd = toClientRect.left - 320;\n\n            return {\n              line: `M ${xStart} ${yStart} \n            C ${xStart + 40} ${yStart}, \n              ${xEnd - 40} ${yEnd}, \n              ${xEnd} ${yEnd}`,\n              start: { x: xStart, y: yStart },\n            };\n          }\n\n          // return `M ${x1} ${y1} , L ${x2}, ${y2}`;\n          // return `M ${x1} ${y1} C ${x1} ${y1}, ${x1 + 20} ${y1}, ${x2} ${y2}`;\n\n          // return `M ${xStart} ${yStart} C ${xStart} ${yStart}, ${xStart + 50} ${\n          //   yStart + 50\n          // }, ${xEnd} ${yEnd}`;\n        } catch (err) {\n          console.log(err);\n        }\n        return null;\n      })\n      ?.filter((line) => !!line)\n      .map(({ start, line }, index) => {\n        return (\n          <g key={index}>\n            <path\n              d={line}\n              strokeWidth=\"2\"\n              fill=\"transparent\"\n              stroke=\"rgba(0, 0, 0, 0.4)\"\n            ></path>\n            <circle cx={start.x} cy={start.y} r=\"4\" fill=\"rgb(0, 0, 0)\" />\n          </g>\n        );\n      });\n  }, [viewport, scrollLeft, connections, refsContext]);\n\n  useEffect(() => {\n    if (!viewport || !ref?.current) {\n      return;\n    }\n    setSvgProps({\n      height: viewport.height,\n      width: viewport.width,\n      viewBox: `0 0 ${viewport.height} ${viewport.width}`,\n    });\n  }, [viewport, ref, setSvgProps]);\n\n  return (\n    <ConnectionsWrap ref={ref}>\n      <Svg\n        preserveAspectRatio=\"none\"\n        xmlns=\"http://www.w3.org/2000/svg\"\n        height={svgProps.height}\n        width={svgProps.width}\n        viewbox={svgProps.viewBox}\n      >\n        {lines}\n      </Svg>\n    </ConnectionsWrap>\n  );\n}\n\nexport default Connections;\n","import { createSlice } from \"@reduxjs/toolkit\";\n\nexport const settingsSlice = createSlice({\n  name: \"settings\",\n  initialState: {\n    readonly: process.env.NODE_ENV !== 'development',\n  },\n  reducers: {},\n});\n\nexport const getReadOnly = (state) => state?.settings?.readonly;\n\nexport default settingsSlice.reducer;\n","import { createSlice } from \"@reduxjs/toolkit\";\n\nexport const linkingSlice = createSlice({\n  name: \"linking\",\n  initialState: {\n    source: false,\n  },\n  reducers: {\n    startLinking: (state, action) => {\n      state.source = action.payload.id;\n    },\n    doneLinking: (state) => {\n      state.source = false;\n    },\n  },\n});\n\nexport const { startLinking, doneLinking } = linkingSlice.actions;\n\nexport const getLinkingSource = (state) => state?.linking?.source;\nexport const getIsLinking = (state) => !!state?.linking?.source;\n\nexport default linkingSlice.reducer;\n","const statuses = {\n  unknown: {\n    color: \"grey\",\n    text: \"Unknown\",\n    description: null,\n  },\n  stable: {\n    color: \"green\",\n    text: \"Stable\",\n    description: null,\n  },\n  underReview: {\n    color: \"orange\",\n    text: \"Under Review\",\n    description: null,\n  },\n  unstable: {\n    color: \"darkorange\",\n    text: \"Unstable\",\n    description: null,\n  },\n  outdated: {\n    color: \"red\",\n    text: \"Outdated \",\n    description: null,\n  },\n  deprecated: {\n    color: \"darkslategray\",\n    text: \"Deprecated\",\n    description: null,\n  },\n};\n\nexport default statuses;\n","import { useCallback, useState } from \"react\";\nimport { useDispatch } from \"react-redux\";\nimport styled from \"styled-components\";\n\nimport statuses from \"../../data/statuses\";\n\nimport Button from \"carbon-react/lib/components/button\";\nimport Textbox from \"carbon-react/lib/__experimental__/components/textbox\";\nimport Typography from \"carbon-react/lib/components/typography\";\nimport Confirm from \"carbon-react/lib/components/confirm\";\nimport { Select, Option } from \"carbon-react/lib/components/select\";\n\nimport { updateItem } from \"../../redux/dependancies/dependanciesSlice\";\n\nimport { removeItem } from \"../../redux/dependancies/dependanciesSlice\";\n\nconst ItemButtons = styled.div`\n  display: flex;\n  justify-content: flex-end;\n  gap: 1rem;\n`;\n\nconst Circle = styled.span`\n  display: inline-block;\n  width: 12px;\n  height: 12px;\n  border-radius: 50%;\n  margin: 0 0.5rem;\n  vertical-align: middle;\n  ${(props) => props.color && `background: ${props.color};`}\n`;\n\nfunction NodeEditor({ itemId, item, doneEditing }) {\n  const dispatch = useDispatch();\n  const [confirmDelete, setConfirmDelete] = useState(false);\n\n  const update = useCallback(\n    (key, val) => {\n      dispatch({\n        type: updateItem.type,\n        payload: {\n          id: itemId,\n          update: {\n            [key]: val,\n          },\n        },\n      });\n    },\n    [itemId, dispatch]\n  );\n\n  return (\n    <form\n      onSubmit={(ev) => {\n        ev.preventDefault();\n      }}\n    >\n      <Typography>\n        <Textbox\n          labelInline\n          label=\"Name\"\n          size=\"small\"\n          value={item.title}\n          onChange={(ev) => {\n            update(\"title\", ev.target.value);\n          }}\n          required\n        />\n      </Typography>\n      <Typography>\n        <Select\n          labelInline\n          name=\"simple\"\n          size=\"small\"\n          label=\"Status\"\n          value={item.status}\n          onChange={(ev) => {\n            update(\"status\", ev.target.value);\n          }}\n        >\n          {Object.keys(statuses).map((status) => {\n            return (\n              <Option value={status} key={status}>\n                <Circle color={statuses[status].color} />\n                {statuses[status].text}\n              </Option>\n            );\n          })}\n        </Select>\n      </Typography>\n      <Typography>\n        <Textbox\n          labelInline\n          label=\"Description\"\n          value={item.description}\n          size=\"small\"\n          onChange={(ev) => update(\"description\", ev.target.value)}\n        />\n      </Typography>\n      <ItemButtons>\n        <Button size=\"small\" onClick={setConfirmDelete}>\n          Delete\n        </Button>\n\n        <Button\n          buttonType=\"primary\"\n          size=\"small\"\n          onClick={doneEditing}\n          type=\"submit\"\n        >\n          Done\n        </Button>\n      </ItemButtons>\n\n      <Confirm\n        title=\"Delete item\"\n        open={confirmDelete}\n        onConfirm={() => {\n          setConfirmDelete(false);\n          requestAnimationFrame(() => {\n            dispatch({ type: removeItem.type, payload: { id: itemId } });\n          });\n        }}\n        onCancel={() => setConfirmDelete(false)}\n      >\n        Are you sure?\n      </Confirm>\n    </form>\n  );\n}\n\nexport default NodeEditor;\n","import {\n  useContext,\n  useCallback,\n  useRef,\n  useState,\n  useMemo,\n  useEffect,\n} from \"react\";\nimport { useHistory } from \"react-router\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport styled from \"styled-components\";\n\nimport Button from \"carbon-react/lib/components/button\";\nimport Content from \"carbon-react/lib/components/content\";\nimport Icon from \"carbon-react/lib/components/icon\";\nimport Tile from \"carbon-react/lib/components/tile\";\nimport Pill from \"carbon-react/lib/components/pill\";\nimport Typography from \"carbon-react/lib/components/typography\";\n\nimport { Refs } from \"../../context/refs\";\n\nimport {\n  getItems,\n  addConnection,\n} from \"../../redux/dependancies/dependanciesSlice\";\n\nimport { getReadOnly } from \"../../redux/settings/settingsSlice\";\n\nimport {\n  startLinking,\n  doneLinking,\n  getIsLinking,\n  getLinkingSource,\n} from \"../../redux/linking/linkingSlice\";\n\nimport NodeEditor from \"./NodeEditor\";\n\nimport statuses from \"../../data/statuses\";\n\nconst ColumnItemEle = styled.div`\n  position: relative;\n  margin-bottom: 1.5rem;\n  ${(props) =>\n    props.linking\n      ? `\n      cursor:pointer;\n      &:hover {\n        border-color: red;\n      }`\n      : \"\"}\n`;\n\nconst ItemButtons = styled.div`\n  display: flex;\n  justify-content: flex-end;\n  gap: 1rem;\n`;\n\nconst ReadOnlyView = styled.div`\n  position: relative;\n  padding-left: 1rem;\n`;\n\nfunction ColumnItem({ itemId }) {\n  const ref = useRef(null);\n\n  const [edittable, setEdittable] = useState(false);\n\n  const dispatch = useDispatch();\n  const history = useHistory();\n\n  const items = useSelector(getItems);\n  const linkingSource = useSelector(getLinkingSource);\n  const linking = useSelector(getIsLinking);\n\n  const readonly = useSelector(getReadOnly);\n\n  useEffect(() => {\n    console.log({ linkingSource, linking });\n  }, [linkingSource, linking]);\n\n  const { addRef, removeRef } = useContext(Refs);\n\n  const item = useMemo(() => {\n    return items[itemId];\n  }, [items, itemId]);\n\n  const startEditing = useCallback(\n    (ev) => {\n      ev.preventDefault();\n      setEdittable(true);\n      requestAnimationFrame(() => {\n        ref.current?.querySelector(\"input\")?.focus();\n      });\n    },\n    [setEdittable, ref]\n  );\n\n  const doneEditing = useCallback(() => {\n    setEdittable(false);\n  }, [setEdittable]);\n\n  const viewTree = useCallback(\n    (ev) => {\n      ev.preventDefault();\n      history.push(`/tree/${itemId}`);\n    },\n    [history, itemId]\n  );\n\n  // Add a link\n  const addLink = useCallback(() => {\n    if (linking && linkingSource !== itemId) {\n      dispatch({\n        type: addConnection.type,\n        payload: { from: linkingSource, to: itemId },\n      });\n    }\n  }, [linking, linkingSource, dispatch, itemId]);\n\n  // Start linking\n  const startLinkingFromNode = useCallback(\n    (ev) => {\n      ev.preventDefault();\n      dispatch({\n        type: startLinking.type,\n        payload: { id: itemId },\n      });\n    },\n    [dispatch, itemId]\n  );\n\n  useEffect(() => {\n    addRef(itemId, ref.current);\n    return () => {\n      removeRef(itemId);\n    };\n  }, [addRef, removeRef, ref, itemId]);\n\n  useEffect(() => {\n    if (linking !== itemId) {\n      return;\n    }\n    const exitlinking = (ev) => {\n      if (ev.key === \"Escape\") {\n        dispatch({ type: doneLinking.type });\n      }\n    };\n    window.addEventListener(\"keydown\", exitlinking);\n    return () => {\n      window.removeEventListener(\"keydown\", exitlinking);\n    };\n  }, [itemId, linking, dispatch]);\n\n  return (\n    <ColumnItemEle ref={ref} onClick={addLink} linking={!!linking} id={itemId}>\n      <Tile orientation=\"vertical\" pixelWidth={320}>\n        <Content>\n          {edittable ? (\n            <NodeEditor {...{ itemId, item, doneEditing }} />\n          ) : (\n            <ReadOnlyView>\n              <div\n                style={{\n                  position: \"absolute\",\n                  right: \"100%\",\n                  top: \"50%\",\n                  transform: \"translate(.5rem, -50%)\",\n                  cursor: \"pointer\",\n                }}\n              >\n                <Icon fontSize=\"medium\" type=\"drag_vertical\" />\n              </div>\n\n              <Typography variant=\"h3\" mb={1}>\n                {item.title ?? \"\\u00A0\"}\n              </Typography>\n\n              {item.status && (\n                <Pill mb={1} borderColor={statuses[item.status]?.color} fill>\n                  {statuses[item.status]?.text}\n                </Pill>\n              )}\n\n              {item.description && (\n                <Typography mb={2}>{item.description}</Typography>\n              )}\n\n              <ItemButtons>\n                {linkingSource === itemId ? (\n                  <Button\n                    size=\"small\"\n                    variant=\"primary\"\n                    onClick={() => dispatch({ type: doneLinking.type })}\n                  >\n                    Done\n                  </Button>\n                ) : (\n                  <>\n                    {!readonly && (\n                      <>\n                        <Button\n                          size=\"small\"\n                          onClick={startEditing}\n                          disabled={!!linking}\n                        >\n                          Edit\n                        </Button>\n                        <Button\n                          size=\"small\"\n                          onClick={startLinkingFromNode}\n                          disabled={!!linking}\n                        >\n                          Link\n                        </Button>\n                      </>\n                    )}\n                    <Button\n                      size=\"small\"\n                      onClick={viewTree}\n                      disabled={!!linking}\n                    >\n                      Tree\n                    </Button>\n                  </>\n                )}\n              </ItemButtons>\n            </ReadOnlyView>\n          )}\n        </Content>\n      </Tile>\n    </ColumnItemEle>\n  );\n}\n\nexport default ColumnItem;\n","import { useMemo, useRef } from \"react\";\nimport IconButton from \"carbon-react/lib/components/icon-button\";\nimport Icon from \"carbon-react/lib/components/icon\";\nimport styled from \"styled-components\";\nimport { useSelector, useDispatch } from \"react-redux\";\n\nimport { getReadOnly } from \"../../redux/settings/settingsSlice\";\nimport {\n  addItem,\n  getColumns,\n  updateColumn,\n} from \"../../redux/dependancies/dependanciesSlice\";\n\nimport ColumnItem from \"./ColumnItem\";\n\nconst ColumnEle = styled.div`\n  display: flex;\n  padding: 0 2.5rem;\n  flex: 0 0 320px;\n  flex-direction: column;\n  border-right: 2px solid #8099a4;\n`;\n\nconst ColumnVerticalList = styled.div`\n  display: flex;\n  flex-direction: column;\n  flex: 1 1 100%;\n  align-items: center;\n  ${(props) => props.justify && `justify-content: ${props.justify};`}\n`;\n\nconst ColumnTitle = styled.div`\n  position: sticky;\n  top: 0;\n  left: 0;\n  right: 0;\n  padding: 1.5rem 0;\n  display: flex;\n  gap: 1rem;\n`;\n\nconst ColumnTitleText = styled.h2`\n  font-size: 18px;\n  font-weight: 600;\n  padding: 0.5rem;\n  border-bottom: 2px solid transparent;\n  margin: 0;\n`;\n\nconst ColumnTitleEditable = styled.input`\n  border: none;\n  background: none;\n  font-family: inherit;\n  font-size: 18px;\n  font-weight: 600;\n  padding: 0.5rem;\n  border-radius: 0;\n  width: 100%;\n  border-bottom: 2px solid transparent;\n  box-sizing: border-box;\n  &:focus {\n    outline: none;\n    border-bottom: 2px solid #0077c8;\n  }\n`;\n\nconst EditableWrap = styled.div`\n  flex: 1 0 auto;\n  position: relative;\n`;\n\nconst EditableIcon = styled.div`\n  position: absolute;\n  right: 0;\n  top: 0.5rem;\n  cursor: pointer;\n`;\n\nfunction Column({ justify = \"flex-start\", colId }) {\n  const dispatch = useDispatch();\n  const columns = useSelector(getColumns);\n\n  const column = useMemo(() => columns[colId], [colId, columns]);\n  const readonly = useSelector(getReadOnly);\n  const titleInput = useRef(null);\n\n  return (\n    <ColumnEle>\n      <ColumnTitle>\n        {readonly ? (\n          <ColumnTitleText>{column?.title}</ColumnTitleText>\n        ) : (\n          <>\n            <EditableWrap>\n              <ColumnTitleEditable\n                ref={titleInput}\n                value={column?.title}\n                type=\"text\"\n                onChange={(ev) => {\n                  dispatch({\n                    type: updateColumn.type,\n                    payload: { id: colId, title: ev.target.value },\n                  });\n                }}\n              />\n              <EditableIcon\n                onClick={() => {\n                  titleInput.current.focus();\n                }}\n              >\n                <Icon type=\"edit\" />\n              </EditableIcon>\n            </EditableWrap>\n            <IconButton\n              type=\"button\"\n              onAction={(ev) => {\n                ev.preventDefault();\n                dispatch({\n                  type: addItem.type,\n                  payload: {\n                    column: colId,\n                  },\n                });\n              }}\n            >\n              <Icon bgTheme=\"info\" bgSize=\"large\" type=\"plus\" />\n            </IconButton>\n          </>\n        )}\n      </ColumnTitle>\n\n      <ColumnVerticalList justify={justify}>\n        {column?.items?.map((itemId) => (\n          <ColumnItem key={itemId} itemId={itemId} />\n        ))}\n      </ColumnVerticalList>\n    </ColumnEle>\n  );\n}\n\nexport default Column;\n","import { useCallback, useRef } from \"react\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport styled from \"styled-components\";\nimport { ClickAndDragProvider } from \"../../context/clickAndDrag\";\nimport { RefsProvider } from \"../../context/refs\";\nimport { getColumns } from \"../../redux/dependancies/dependanciesSlice\";\n\nimport Connections from \"./Connections\";\nimport Column from \"./Column\";\nimport { updateScrollLeft } from \"../../redux/connections/connectionsSlice\";\n\nconst ColumnsViewWrap = styled.div`\n  min-height: 100vh;\n  display: flex;\n  flex-direction: column;\n  align-items: stretch;\n  position: relative;\n`;\nconst ColumnsScrollableWrap = styled.div`\n  width: 100%;\n  display: flex;\n  flex: 1 1 100%;\n  overflow-x: scroll;\n  scroll-behaviour: smooth;\n`;\n\nconst Provders = ({ children }) => (\n  <ClickAndDragProvider>\n    <RefsProvider>{children}</RefsProvider>\n  </ClickAndDragProvider>\n);\n\nfunction ColumnsView() {\n  const columns = useSelector(getColumns);\n  const dispatch = useDispatch();\n\n  const scrollable = useRef(null);\n\n  const handleScroll = useCallback(\n    (ev) => {\n      dispatch({\n        type: updateScrollLeft.type,\n        payload: { value: ev.target.scrollLeft },\n      });\n    },\n    [dispatch]\n  );\n\n  return (\n    <Provders>\n      <Connections />\n      <ColumnsViewWrap>\n        <ColumnsScrollableWrap ref={scrollable} onScroll={handleScroll}>\n          {Object.keys(columns).map((colId) => (\n            <Column key={colId} colId={colId} />\n          ))}\n        </ColumnsScrollableWrap>\n      </ColumnsViewWrap>\n    </Provders>\n  );\n}\nexport default ColumnsView;\n","import Button from \"carbon-react/lib/components/button\";\nimport Typography from \"carbon-react/lib/components/typography\";\nimport { useCallback } from \"react\";\nimport { useSelector } from \"react-redux\";\nimport { useHistory } from \"react-router\";\nimport styled from \"styled-components\";\n\nimport { getItems } from \"../redux/dependancies/dependanciesSlice\";\n\nconst ItemActions = styled.div`\n  display: flex;\n  gap: 0.5rem;\n  justify-content: flex-end;\n`;\n\nconst ItemList = styled.ul`\n  max-height: 400px;\n  overflow-y: auto;\n  list-style: none;\n  padding: 0;\n`;\n\nconst Item = styled.li`\n  padding: 0.5rem;\n  border: 1px solid #ccd6db;\n  margin-bottom: 1rem;\n`;\n\nfunction SearchResults({ searchTerm }) {\n  const history = useHistory();\n  const searchSelector = useCallback(\n    (state) => {\n      if (!searchTerm) {\n        return [];\n      }\n      const items = getItems(state);\n      if (!items) {\n        return [];\n      }\n      return Object.keys(items)\n        .map((itemId) => ({\n          ...items[itemId],\n          id: itemId,\n        }))\n        .filter(\n          (item) =>\n            item.title.toLowerCase().includes(searchTerm.toLowerCase()) ||\n            item.description.toLowerCase().includes(searchTerm.toLowerCase())\n        );\n    },\n    [searchTerm]\n  );\n  const results = useSelector((state) => searchSelector(state, searchTerm));\n  return (\n    <div>\n      <ItemList>\n        {results.map((item) => {\n          return (\n            <Item key={item.id} as=\"li\" listStyleType=\"none\" pl={0}>\n              <Typography fontWeight=\"700\" mb={2}>\n                {item.title}\n              </Typography>\n              <ItemActions>\n                <Button\n                  size=\"small\"\n                  onClick={() => {\n                    history.push(`/tree/${item.id}`);\n                  }}\n                >\n                  Tree View\n                </Button>\n              </ItemActions>\n            </Item>\n          );\n        })}\n      </ItemList>\n    </div>\n  );\n}\n\nexport default SearchResults;\n","import { useState } from \"react\";\n\nimport Search from \"carbon-react/lib/__experimental__/components/search\";\nimport SearchResults from \"./SearchResults\";\nimport styled from \"styled-components\";\nimport Typography from \"carbon-react/lib/components/typography\";\n\nconst SearchWrap = styled.form`\n  margin: 2rem 0;\n  padding: 0 2rem;\n`;\n\nconst SearchLabel = styled.label`\n  display: block;\n  margin: 0 0 2rem;\n`;\n\nfunction ComponentSearch() {\n  const [searchTerm, setSearchTerm] = useState(\"\");\n\n  return (\n    <SearchWrap onSubmit={(ev) => ev.preventDefault()}>\n      <SearchLabel>\n        <Typography as=\"div\" fontWeight=\"700\" mb={1}>Search</Typography>\n        <Search\n          id=\"search\"\n          name=\"search\"\n          placeholder=\"\"\n          onChange={(e) => setSearchTerm(e.target.value)}\n          value={searchTerm}\n          searchButton\n        />\n      </SearchLabel>\n      <SearchResults searchTerm={searchTerm} />\n    </SearchWrap>\n  );\n}\n\nexport default ComponentSearch;\n","import Button from \"carbon-react/lib/components/button\";\nimport { useCallback } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { getSaving, save } from \"../redux/dependancies/dependanciesSlice\";\nimport { getReadOnly } from \"../redux/settings/settingsSlice\";\n\nfunction SaveButton() {\n  const readonly = useSelector(getReadOnly);\n  const saving = useSelector(getSaving);\n  const dispatch = useDispatch();\n  const handleClick = useCallback(\n    (ev) => {\n      ev.preventDefault();\n      dispatch({ type: save.type });\n    },\n    [dispatch]\n  );\n\n  if (readonly) {\n    return null;\n  }\n\n  return (\n    <Button\n      fullWidth\n      buttonType=\"primary\"\n      disabled={saving}\n      onClick={handleClick}\n    >\n      Save\n    </Button>\n  );\n}\n\nexport default SaveButton;\n","import { Route, useHistory } from \"react-router-dom\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport styled from \"styled-components\";\nimport Button from \"carbon-react/lib/components/button\";\n\nimport { addColumn } from \"../redux/dependancies/dependanciesSlice\";\nimport { getReadOnly } from \"../redux/settings/settingsSlice\";\n\nimport ComponentSearch from \"./ComponentSearch\";\nimport SaveButton from \"./SaveButton\";\n\nconst SidebarWrap = styled.div`\n  width: 320px;\n  flex: 0 0 320px;\n  background: rgb(242, 245, 246);\n  position: relative;\n  z-index: 2;\n`;\n\nconst SidebarActions = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  padding: 0 2rem;\n  gap: 1rem;\n`;\n\nconst Hr = styled.hr`\n  margin: 2rem 0;\n  border-bottom: 1px solid rgba(0, 0, 0, 0.1);\n`;\n\nfunction AppSidebar() {\n  const history = useHistory();\n  const dispatch = useDispatch();\n  const readonly = useSelector(getReadOnly);\n  return (\n    <SidebarWrap>\n      <ComponentSearch />\n\n      <Hr />\n\n      <SidebarActions>\n        <Route path=\"/tree/\">\n          <Button fullWidth onClick={() => history.push(\"/\")}>\n            Columns View\n          </Button>\n          <Button fullWidth onClick={() => history.goBack()}>\n            Back\n          </Button>\n        </Route>\n        <Route exact path=\"/\">\n          {!readonly && (\n            <Button\n              onClick={() => {\n                dispatch({ type: addColumn.toString() });\n              }}\n              fullWidth\n              iconType=\"plus\"\n            >\n              Add New Column\n            </Button>\n          )}\n        </Route>\n        <SaveButton />\n      </SidebarActions>\n    </SidebarWrap>\n  );\n}\n\nexport default AppSidebar;\n","import \"./App.css\";\r\nimport { HashRouter as Router, Switch, Route } from \"react-router-dom\";\r\n\r\nimport LoadData from \"./components/LoadData\";\r\nimport TreeView from \"./features/Tree/TreeView\";\r\nimport ColumnsView from \"./features/Columns/ColumnsView\";\r\n\r\nimport AppSidebar from \"./components/AppSidebar\";\r\n\r\nimport styled from \"styled-components\";\r\n\r\nconst AppWrap = styled.div`\r\n  display: flex;\r\n  min-height: 100vh;\r\n  width: 100%;\r\n  max-width: 100vw;\r\n  align-items: stretch;\r\n`;\r\n\r\nconst Wrap = styled.div`\r\n  flex: 0 1 calc(100% - 320px);\r\n  max-width: calc(100% - 320px);\r\n  position: relative;\r\n  z-index: 1;\r\n`;\r\n\r\nfunction App() {\r\n  return (\r\n    <AppWrap>\r\n      <LoadData />\r\n      <Router>\r\n        <AppSidebar />\r\n\r\n        <Wrap>\r\n          <Switch>\r\n            <Route path=\"/tree/:itemId\" component={TreeView} />\r\n            <Route path=\"/\" component={ColumnsView} />\r\n          </Switch>\r\n        </Wrap>\r\n      </Router>\r\n    </AppWrap>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import { createSlice } from \"@reduxjs/toolkit\";\n\nexport const userSlice = createSlice({\n  name: \"user\",\n  initialState: {\n    userDetails: {\n      uid: null,\n      email: null,\n      photoURL: null,\n    },\n    signedIn: false,\n    writeAccess: false,\n  },\n  reducers: {\n    setUser: (state, action) => {\n      if (action.payload) {\n        state.userDetails = {\n          uid: action.payload.user.uid,\n          email: action.payload.user.email,\n          photoURL: action.payload.user.photoURL,\n        };\n        state.signedIn = true;\n        state.writeAccess =\n          action.payload.user.uid === \"hFgfQcppuQXWOjHC72Cs7XK0uQ52\";\n      } else {\n        state.userDetails = {\n          uid: null,\n          email: null,\n          photoURL: null,\n        };\n        state.signedIn = false;\n        state.writeAccess = false;\n      }\n    },\n  },\n});\n\nexport const { setUser } = userSlice.actions;\n\nexport const getUserDetails = (state) => state?.user?.userDetails;\nexport const getSignedIn = (state) => state?.user?.signedIn;\nexport const getWriteAccess = (state) => state?.user?.writeAccess;\n\nexport default userSlice.reducer;\n","import { configureStore } from \"@reduxjs/toolkit\";\r\n\r\nimport dependanciesReducer from \"./dependancies/dependanciesSlice\";\r\nimport connectionsReducer from \"./connections/connectionsSlice\";\r\nimport linkingReducer from \"./linking/linkingSlice\";\r\nimport optionsReducer from \"./options/optionsSlice\";\r\nimport userReducer from \"./user/userSlice\";\r\nimport settingsReducer from \"./settings/settingsSlice\";\r\n\r\nexport default configureStore({\r\n  reducer: {\r\n    linking: linkingReducer,\r\n    dependancies: dependanciesReducer,\r\n    connections: connectionsReducer,\r\n    options: optionsReducer,\r\n    user: userReducer,\r\n    settings: settingsReducer,\r\n  },\r\n});\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' },\r\n  })\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","/* Add your config from the Firebase Console */\nconst firebaseConfig = {\n  apiKey: \"AIzaSyAESY7RU998b2rdyyWMhCkt4mfQXfEdpyM\",\n  authDomain: \"dependancy-graph.firebaseapp.com\",\n  projectId: \"dependancy-graph\",\n  storageBucket: \"dependancy-graph.appspot.com\",\n  messagingSenderId: \"257602314188\",\n  appId: \"1:257602314188:web:b6daa829c5e07f23648769\",\n};\nexport default firebaseConfig;\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport \"./index.css\";\r\nimport App from \"./App\";\r\nimport store from \"./redux/store\";\r\nimport { Provider } from \"react-redux\";\r\nimport * as serviceWorker from \"./serviceWorker\";\r\n\r\nimport GlobalStyle from \"carbon-react/lib/style/global-style\";\r\n\r\nimport \"firebase/firestore\";\r\nimport { FirebaseAppProvider } from \"reactfire\";\r\n\r\nimport firebaseConfig from \"./firebaseConfig\";\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <GlobalStyle />\r\n    <FirebaseAppProvider firebaseConfig={firebaseConfig}>\r\n      <Provider store={store}>\r\n        <App />\r\n      </Provider>\r\n    </FirebaseAppProvider>\r\n  </React.StrictMode>,\r\n  document.getElementById(\"root\")\r\n);\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}